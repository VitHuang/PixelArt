var COMPILED=true,goog=goog||{};goog.global=this;goog.DEBUG=true;goog.LOCALE="en";goog.provide=function(b){if(!COMPILED){if(goog.isProvided_(b))throw Error('Namespace "'+b+'" already declared.');delete goog.implicitNamespaces_[b];for(var f=b;f=f.substring(0,f.lastIndexOf("."));){if(goog.getObjectByName(f))break;goog.implicitNamespaces_[f]=true}}goog.exportPath_(b)};
goog.setTestOnly=function(b){if(COMPILED&&!goog.DEBUG)throw b=b||"",Error("Importing test-only code into non-debug environment"+b?": "+b:".");};if(!COMPILED)goog.isProvided_=function(b){return!goog.implicitNamespaces_[b]&&!!goog.getObjectByName(b)},goog.implicitNamespaces_={};goog.exportPath_=function(b,f,d){b=b.split(".");d=d||goog.global;!(b[0]in d)&&d.execScript&&d.execScript("var "+b[0]);for(var h;b.length&&(h=b.shift());)!b.length&&goog.isDef(f)?d[h]=f:d=d[h]?d[h]:d[h]={}};
goog.getObjectByName=function(b,f){for(var d=b.split("."),h=f||goog.global,j;j=d.shift();)if(goog.isDefAndNotNull(h[j]))h=h[j];else return null;return h};goog.globalize=function(b,f){var d=f||goog.global,h;for(h in b)d[h]=b[h]};
goog.addDependency=function(b,f,d){if(!COMPILED){for(var h,b=b.replace(/\\/g,"/"),j=goog.dependencies_,i=0;h=f[i];i++)j.nameToPath[h]=b,b in j.pathToNames||(j.pathToNames[b]={}),j.pathToNames[b][h]=true;for(h=0;f=d[h];h++)b in j.requires||(j.requires[b]={}),j.requires[b][f]=true}};goog.ENABLE_DEBUG_LOADER=true;
goog.require=function(b){if(!COMPILED&&!goog.isProvided_(b)){if(goog.ENABLE_DEBUG_LOADER){var f=goog.getPathFromDeps_(b);if(f){goog.included_[f]=true;goog.writeScripts_();return}}b="goog.require could not find: "+b;goog.global.console&&goog.global.console.error(b);throw Error(b);}};goog.basePath="";goog.nullFunction=function(){};goog.identityFunction=function(b){return b};goog.abstractMethod=function(){throw Error("unimplemented abstract method");};
goog.addSingletonGetter=function(b){b.getInstance=function(){return b.instance_||(b.instance_=new b)}};
if(!COMPILED&&goog.ENABLE_DEBUG_LOADER)goog.included_={},goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var b=goog.global.document;return typeof b!="undefined"&&"write"in b},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var b=goog.global.document.getElementsByTagName("script"),f=b.length-1;f>=0;--f){var d=b[f].src,h=d.lastIndexOf("?"),
h=h==-1?d.length:h;if(d.substr(h-7,7)=="base.js"){goog.basePath=d.substr(0,h-7);break}}},goog.importScript_=function(b){var f=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;!goog.dependencies_.written[b]&&f(b)&&(goog.dependencies_.written[b]=true)},goog.writeScriptTag_=function(b){return goog.inHtmlDocument_()?(goog.global.document.write('<script type="text/javascript" src="'+b+'"><\/script>'),true):false},goog.writeScripts_=function(){function b(i){if(!(i in h.written)){if(!(i in h.visited)&&
(h.visited[i]=true,i in h.requires))for(var j in h.requires[i])if(!goog.isProvided_(j))if(j in h.nameToPath)b(h.nameToPath[j]);else throw Error("Undefined nameToPath for "+j);i in d||(d[i]=true,f.push(i))}}var f=[],d={},h=goog.dependencies_,j;for(j in goog.included_)h.written[j]||b(j);for(j=0;j<f.length;j++)if(f[j])goog.importScript_(goog.basePath+f[j]);else throw Error("Undefined script input");},goog.getPathFromDeps_=function(b){return b in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[b]:
null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js");
goog.typeOf=function(b){var f=typeof b;if(f=="object")if(b){if(b instanceof Array)return"array";else if(b instanceof Object)return f;var d=Object.prototype.toString.call(b);if(d=="[object Window]")return"object";if(d=="[object Array]"||typeof b.length=="number"&&typeof b.splice!="undefined"&&typeof b.propertyIsEnumerable!="undefined"&&!b.propertyIsEnumerable("splice"))return"array";if(d=="[object Function]"||typeof b.call!="undefined"&&typeof b.propertyIsEnumerable!="undefined"&&!b.propertyIsEnumerable("call"))return"function"}else return"null";
else if(f=="function"&&typeof b.call=="undefined")return"object";return f};goog.propertyIsEnumerableCustom_=function(b,f){if(f in b)for(var d in b)if(d==f&&Object.prototype.hasOwnProperty.call(b,f))return true;return false};goog.propertyIsEnumerable_=function(b,f){return b instanceof Object?Object.prototype.propertyIsEnumerable.call(b,f):goog.propertyIsEnumerableCustom_(b,f)};goog.isDef=function(b){return b!==void 0};goog.isNull=function(b){return b===null};
goog.isDefAndNotNull=function(b){return b!=null};goog.isArray=function(b){return goog.typeOf(b)=="array"};goog.isArrayLike=function(b){var f=goog.typeOf(b);return f=="array"||f=="object"&&typeof b.length=="number"};goog.isDateLike=function(b){return goog.isObject(b)&&typeof b.getFullYear=="function"};goog.isString=function(b){return typeof b=="string"};goog.isBoolean=function(b){return typeof b=="boolean"};goog.isNumber=function(b){return typeof b=="number"};
goog.isFunction=function(b){return goog.typeOf(b)=="function"};goog.isObject=function(b){b=goog.typeOf(b);return b=="object"||b=="array"||b=="function"};goog.getUid=function(b){return b[goog.UID_PROPERTY_]||(b[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.removeUid=function(b){"removeAttribute"in b&&b.removeAttribute(goog.UID_PROPERTY_);try{delete b[goog.UID_PROPERTY_]}catch(f){}};goog.UID_PROPERTY_="closure_uid_"+Math.floor(Math.random()*2147483648).toString(36);goog.uidCounter_=0;
goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(b){var f=goog.typeOf(b);if(f=="object"||f=="array"){if(b.clone)return b.clone();var f=f=="array"?[]:{},d;for(d in b)f[d]=goog.cloneObject(b[d]);return f}return b};goog.bindNative_=function(b,f,d){return b.call.apply(b.bind,arguments)};
goog.bindJs_=function(b,f,d){if(!b)throw Error();if(arguments.length>2){var h=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(d,h);return b.apply(f,d)}}else return function(){return b.apply(f,arguments)}};goog.bind=function(b,f,d){goog.bind=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?goog.bindNative_:goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(b,f){var d=Array.prototype.slice.call(arguments,1);return function(){var f=Array.prototype.slice.call(arguments);f.unshift.apply(f,d);return b.apply(this,f)}};goog.mixin=function(b,f){for(var d in f)b[d]=f[d]};goog.now=Date.now||function(){return+new Date};
goog.globalEval=function(b){if(goog.global.execScript)goog.global.execScript(b,"JavaScript");else if(goog.global.eval){if(goog.evalWorksForGlobals_==null)goog.global.eval("var _et_ = 1;"),typeof goog.global._et_!="undefined"?(delete goog.global._et_,goog.evalWorksForGlobals_=true):goog.evalWorksForGlobals_=false;if(goog.evalWorksForGlobals_)goog.global.eval(b);else{var f=goog.global.document,d=f.createElement("script");d.type="text/javascript";d.defer=false;d.appendChild(f.createTextNode(b));f.body.appendChild(d);
f.body.removeChild(d)}}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;goog.getCssName=function(b,f){var d=function(b){return goog.cssNameMapping_[b]||b},h;h=goog.cssNameMapping_?goog.cssNameMappingStyle_=="BY_WHOLE"?d:function(b){for(var b=b.split("-"),f=[],h=0;h<b.length;h++)f.push(d(b[h]));return f.join("-")}:function(b){return b};return f?b+"-"+h(f):h(b)};goog.setCssNameMapping=function(b,f){goog.cssNameMapping_=b;goog.cssNameMappingStyle_=f};
if(!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING)goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING;goog.getMsg=function(b,f){var d=f||{},h;for(h in d)var j=(""+d[h]).replace(/\$/g,"$$$$"),b=b.replace(RegExp("\\{\\$"+h+"\\}","gi"),j);return b};goog.exportSymbol=function(b,f,d){goog.exportPath_(b,f,d)};goog.exportProperty=function(b,f,d){b[f]=d};goog.inherits=function(b,f){function d(){}d.prototype=f.prototype;b.superClass_=f.prototype;b.prototype=new d;b.prototype.constructor=b};
goog.base=function(b,f,d){var h=arguments.callee.caller;if(h.superClass_)return h.superClass_.constructor.apply(b,Array.prototype.slice.call(arguments,1));for(var j=Array.prototype.slice.call(arguments,2),i=false,l=b.constructor;l;l=l.superClass_&&l.superClass_.constructor)if(l.prototype[f]===h)i=true;else if(i)return l.prototype[f].apply(b,j);if(b[f]===h)return b.constructor.prototype[f].apply(b,j);else throw Error("goog.base called from a method of one name to a method of a different name");};
goog.scope=function(b){b.call(goog.global)};var WebGLDebugUtils=function(){function b(b){if(l==null){l={};for(var f in b)typeof b[f]=="number"&&(l[b[f]]=f)}}function f(){if(l==null)throw"WebGLDebugUtils.init(ctx) not called";}function d(b){f();var d=l[b];return d!==void 0?d:"*UNKNOWN WebGL ENUM (0x"+b.toString(16)+")"}function h(b,f,h){b=i[b];return b!==void 0&&b[f]?d(h):h.toString()}function j(b){var f=b.getParameter(b.MAX_VERTEX_ATTRIBS),d=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,d);for(var i=0;i<f;++i)b.disableVertexAttribArray(i),b.vertexAttribPointer(i,
4,b.FLOAT,false,0,0),b.vertexAttrib1f(i,0);b.deleteBuffer(d);f=b.getParameter(b.MAX_TEXTURE_IMAGE_UNITS);for(i=0;i<f;++i)b.activeTexture(b.TEXTURE0+i),b.bindTexture(b.TEXTURE_CUBE_MAP,null),b.bindTexture(b.TEXTURE_2D,null);b.activeTexture(b.TEXTURE0);b.useProgram(null);b.bindBuffer(b.ARRAY_BUFFER,null);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null);b.bindFramebuffer(b.FRAMEBUFFER,null);b.bindRenderbuffer(b.RENDERBUFFER,null);b.disable(b.BLEND);b.disable(b.CULL_FACE);b.disable(b.DEPTH_TEST);b.disable(b.DITHER);
b.disable(b.SCISSOR_TEST);b.blendColor(0,0,0,0);b.blendEquation(b.FUNC_ADD);b.blendFunc(b.ONE,b.ZERO);b.clearColor(0,0,0,0);b.clearDepth(1);b.clearStencil(-1);b.colorMask(true,true,true,true);b.cullFace(b.BACK);b.depthFunc(b.LESS);b.depthMask(true);b.depthRange(0,1);b.frontFace(b.CCW);b.hint(b.GENERATE_MIPMAP_HINT,b.DONT_CARE);b.lineWidth(1);b.pixelStorei(b.PACK_ALIGNMENT,4);b.pixelStorei(b.UNPACK_ALIGNMENT,4);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,false);b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
false);b.UNPACK_COLORSPACE_CONVERSION_WEBGL&&b.pixelStorei(b.UNPACK_COLORSPACE_CONVERSION_WEBGL,b.BROWSER_DEFAULT_WEBGL);b.polygonOffset(0,0);b.sampleCoverage(1,false);b.scissor(0,0,b.canvas.width,b.canvas.height);b.stencilFunc(b.ALWAYS,0,4294967295);b.stencilMask(4294967295);b.stencilOp(b.KEEP,b.KEEP,b.KEEP);b.viewport(0,0,b.canvas.clientWidth,b.canvas.clientHeight);for(b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT|b.STENCIL_BUFFER_BIT);b.getError(););}var i={enable:{0:true},disable:{0:true},getParameter:{0:true},
drawArrays:{0:true},drawElements:{0:true,2:true},createShader:{0:true},getShaderParameter:{1:true},getProgramParameter:{1:true},getVertexAttrib:{1:true},vertexAttribPointer:{2:true},bindTexture:{0:true},activeTexture:{0:true},getTexParameter:{0:true,1:true},texParameterf:{0:true,1:true},texParameteri:{0:true,1:true,2:true},texImage2D:{0:true,2:true,6:true,7:true},texSubImage2D:{0:true,6:true,7:true},copyTexImage2D:{0:true,2:true},copyTexSubImage2D:{0:true},generateMipmap:{0:true},bindBuffer:{0:true},
bufferData:{0:true,2:true},bufferSubData:{0:true},getBufferParameter:{0:true,1:true},pixelStorei:{0:true,1:true},readPixels:{4:true,5:true},bindRenderbuffer:{0:true},bindFramebuffer:{0:true},checkFramebufferStatus:{0:true},framebufferRenderbuffer:{0:true,1:true,2:true},framebufferTexture2D:{0:true,1:true,2:true},getFramebufferAttachmentParameter:{0:true,1:true,2:true},getRenderbufferParameter:{0:true,1:true},renderbufferStorage:{0:true,1:true},clear:{0:true},depthFunc:{0:true},blendFunc:{0:true,1:true},
blendFuncSeparate:{0:true,1:true,2:true,3:true},blendEquation:{0:true},blendEquationSeparate:{0:true,1:true},stencilFunc:{0:true},stencilFuncSeparate:{0:true,1:true},stencilMaskSeparate:{0:true},stencilOp:{0:true,1:true,2:true},stencilOpSeparate:{0:true,1:true,2:true,3:true},cullFace:{0:true},frontFace:{0:true}},l=null;return{init:b,mightBeEnum:function(b){f();return l[b]!==void 0},glEnumToString:d,glFunctionArgToString:h,makeDebugContext:function(f,i){function j(b,f){return function(){var d=b[f].apply(b,
arguments),h=b.getError();h!=0&&(l[h]=true,i(h,f,arguments));return d}}b(f);var i=i||function(b,f,i){for(var j="",n=0;n<i.length;++n)j+=(n==0?"":", ")+h(f,n,i[n]);b="WebGL error "+d(b)+" in "+f+"("+j+")";window.console&&window.console.log&&window.console.log(b)},l={},y={},s;for(s in f)y[s]=typeof f[s]=="function"?j(f,s):f[s];y.getError=function(){for(var b in l)if(l[b])return l[b]=false,b;return f.NO_ERROR};return y},makeLostContextSimulatingContext:function(b){function f(){for(var b=Object.keys(D),
d=0;d<b.length;++d)delete glErrorShdow_[b]}function d(b,f){var i=b[f];return function(){if(!u){var f;a:{f=arguments;for(var d=0;d<f.length;++d){var h=f[d];if(h instanceof WebGLBuffer||h instanceof WebGLFramebuffer||h instanceof WebGLProgram||h instanceof WebGLRenderbuffer||h instanceof WebGLShader||h instanceof WebGLTexture){f=h.__webglDebugContextLostId__==l;break a}}f=true}if(f)return i.apply(b,arguments);else D[b.INVALID_OPERATION]=true}}}function i(b){return typeof b=="function"?b:function(f){b.handleEvent(f)}}
var h={},l=1,u=false,I=[],J=void 0,K=void 0,G=void 0,D={},x;for(x in b)h[x]=typeof b[x]=="function"?d(b,x):b[x];h.loseContext=function(){if(!u){u=true;for(++l;b.getError(););f();D[b.CONTEXT_LOST_WEBGL]=true;setTimeout(function(){J&&J({statusMessage:"context lost"})},0)}};h.restoreContext=function(){if(u)if(K)setTimeout(function(){for(var f=0;f<I.length;++f){var d=I[f];d instanceof WebGLBuffer?b.deleteBuffer(d):d instanceof WebctxFramebuffer?b.deleteFramebuffer(d):d instanceof WebctxProgram?b.deleteProgram(d):
d instanceof WebctxRenderbuffer?b.deleteRenderbuffer(d):d instanceof WebctxShader?b.deleteShader(d):d instanceof WebctxTexture&&b.deleteTexture(d)}j(b);u=false;K&&(K=G,G=void 0,callback({statusMessage:"context restored"}))},0);else throw"You can not restore the context without a listener";};h.getError=function(){if(!u)for(var f;f=b.getError();)D[f]=true;for(f in D)if(D[f])return delete D[f],f;return b.NO_ERROR};var F="createBuffer,createFramebuffer,createProgram,createRenderbuffer,createShader,createTexture".split(",");
for(x=0;x<F.length;++x){var B=F[x];h[B]=function(f){return function(){if(u)return null;var d=f.apply(b,arguments);d.__webglDebugContextLostId__=l;I.push(d);return d}}(b[B])}F="getActiveAttrib,getActiveUniform,getBufferParameter,getContextAttributes,getAttachedShaders,getFramebufferAttachmentParameter,getParameter,getProgramParameter,getProgramInfoLog,getRenderbufferParameter,getShaderParameter,getShaderInfoLog,getShaderSource,getTexParameter,getUniform,getUniformLocation,getVertexAttrib".split(",");
for(x=0;x<F.length;++x)B=F[x],h[B]=function(f){return function(){return u?null:f.apply(b,arguments)}}(h[B]);F="isBuffer,isEnabled,isFramebuffer,isProgram,isRenderbuffer,isShader,isTexture".split(",");for(x=0;x<F.length;++x)B=F[x],h[B]=function(f){return function(){return u?false:f.apply(b,arguments)}}(h[B]);h.checkFramebufferStatus=function(f){return function(){return u?b.FRAMEBUFFER_UNSUPPORTED:f.apply(b,arguments)}}(h.checkFramebufferStatus);h.getAttribLocation=function(f){return function(){return u?
-1:f.apply(b,arguments)}}(h.getAttribLocation);h.getVertexAttribOffset=function(f){return function(){return u?0:f.apply(b,arguments)}}(h.getVertexAttribOffset);h.isContextLost=function(){return u};h.registerOnContextLostListener=function(b){J=i(b)};h.registerOnContextRestoredListener=function(b){u?G=i(b):K=i(b)};return h},resetToInitialState:j}}();var glslunit={ShaderVariable:function(b,f){this.globalVariables_={};this.name_=b;this.isTexture_=!!f;this.attributeLocation_=null}};glslunit.ShaderVariable.QualifierType={UNIFORM:1,ATTRIBUTE:2,VARYING:3};glslunit.ShaderVariable.prototype.getName=function(){if(this.renameMap_){var b=this.renameMap_[this.name_];if(b)return b}return this.name_};glslunit.ShaderVariable.prototype.setGlobalVariables=function(b,f){this.globalVariables_=b;this.renameMap_=f||null};
glslunit.ShaderVariable.prototype.getIsTexture=function(){return this.isTexture_};glslunit.ShaderVariable.prototype.cleanUp=function(b){this.attributeLocation_!=null&&b.disableVertexAttribArray(this.attributeLocation_)};
glslunit.ShaderVariable.prototype.getLocation=function(b,f){var d=this.getQualifierType();this.attributeLocation_=null;return d==glslunit.ShaderVariable.QualifierType.ATTRIBUTE?(d=b.getAttribLocation(f,this.getName()),d>=0?(b.enableVertexAttribArray(d),this.attributeLocation_=d):null):b.getUniformLocation(f,this.getName())};
glslunit.ShaderVariable.prototype.getQualifierType=function(){var b=this.globalVariables_[this.getName()];if(b&&(b=b.typeAttribute.qualifier))return glslunit.ShaderVariable.QualifierType[b.split(" ").slice(-1)[0].toUpperCase()];throw this.getName()+" was not an input variable to the shader program.";};glslunit.ShaderVariable.prototype.getTypeName=function(){return this.globalVariables_[this.getName()].typeAttribute.name};goog.debug={};goog.debug.Error=function(b){this.stack=Error().stack||"";if(b)this.message=String(b)};goog.inherits(goog.debug.Error,Error);goog.debug.Error.prototype.name="CustomError";goog.string={};goog.string.Unicode={NBSP:"\u00a0"};goog.string.startsWith=function(b,f){return b.lastIndexOf(f,0)==0};goog.string.endsWith=function(b,f){var d=b.length-f.length;return d>=0&&b.indexOf(f,d)==d};goog.string.caseInsensitiveStartsWith=function(b,f){return goog.string.caseInsensitiveCompare(f,b.substr(0,f.length))==0};goog.string.caseInsensitiveEndsWith=function(b,f){return goog.string.caseInsensitiveCompare(f,b.substr(b.length-f.length,f.length))==0};
goog.string.subs=function(b,f){for(var d=1;d<arguments.length;d++)var h=String(arguments[d]).replace(/\$/g,"$$$$"),b=b.replace(/\%s/,h);return b};goog.string.collapseWhitespace=function(b){return b.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")};goog.string.isEmpty=function(b){return/^[\s\xa0]*$/.test(b)};goog.string.isEmptySafe=function(b){return goog.string.isEmpty(goog.string.makeSafe(b))};goog.string.isBreakingWhitespace=function(b){return!/[^\t\n\r ]/.test(b)};goog.string.isAlpha=function(b){return!/[^a-zA-Z]/.test(b)};
goog.string.isNumeric=function(b){return!/[^0-9]/.test(b)};goog.string.isAlphaNumeric=function(b){return!/[^a-zA-Z0-9]/.test(b)};goog.string.isSpace=function(b){return b==" "};goog.string.isUnicodeChar=function(b){return b.length==1&&b>=" "&&b<="~"||b>="\u0080"&&b<="\ufffd"};goog.string.stripNewlines=function(b){return b.replace(/(\r\n|\r|\n)+/g," ")};goog.string.canonicalizeNewlines=function(b){return b.replace(/(\r\n|\r|\n)/g,"\n")};
goog.string.normalizeWhitespace=function(b){return b.replace(/\xa0|\s/g," ")};goog.string.normalizeSpaces=function(b){return b.replace(/\xa0|[ \t]+/g," ")};goog.string.collapseBreakingSpaces=function(b){return b.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")};goog.string.trim=function(b){return b.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};goog.string.trimLeft=function(b){return b.replace(/^[\s\xa0]+/,"")};goog.string.trimRight=function(b){return b.replace(/[\s\xa0]+$/,"")};
goog.string.caseInsensitiveCompare=function(b,f){var d=String(b).toLowerCase(),h=String(f).toLowerCase();return d<h?-1:d==h?0:1};goog.string.numerateCompareRegExp_=/(\.\d+)|(\d+)|(\D+)/g;
goog.string.numerateCompare=function(b,f){if(b==f)return 0;if(!b)return-1;if(!f)return 1;for(var d=b.toLowerCase().match(goog.string.numerateCompareRegExp_),h=f.toLowerCase().match(goog.string.numerateCompareRegExp_),j=Math.min(d.length,h.length),i=0;i<j;i++){var l=d[i],q=h[i];if(l!=q){d=parseInt(l,10);return!isNaN(d)&&(h=parseInt(q,10),!isNaN(h)&&d-h)?d-h:l<q?-1:1}}return d.length!=h.length?d.length-h.length:b<f?-1:1};goog.string.encodeUriRegExp_=/^[a-zA-Z0-9\-_.!~*'()]*$/;
goog.string.urlEncode=function(b){b=String(b);return!goog.string.encodeUriRegExp_.test(b)?encodeURIComponent(b):b};goog.string.urlDecode=function(b){return decodeURIComponent(b.replace(/\+/g," "))};goog.string.newLineToBr=function(b,f){return b.replace(/(\r\n|\r|\n)/g,f?"<br />":"<br>")};
goog.string.htmlEscape=function(b,f){if(f)return b.replace(goog.string.amperRe_,"&amp;").replace(goog.string.ltRe_,"&lt;").replace(goog.string.gtRe_,"&gt;").replace(goog.string.quotRe_,"&quot;");else{if(!goog.string.allRe_.test(b))return b;b.indexOf("&")!=-1&&(b=b.replace(goog.string.amperRe_,"&amp;"));b.indexOf("<")!=-1&&(b=b.replace(goog.string.ltRe_,"&lt;"));b.indexOf(">")!=-1&&(b=b.replace(goog.string.gtRe_,"&gt;"));b.indexOf('"')!=-1&&(b=b.replace(goog.string.quotRe_,"&quot;"));return b}};
goog.string.amperRe_=/&/g;goog.string.ltRe_=/</g;goog.string.gtRe_=/>/g;goog.string.quotRe_=/\"/g;goog.string.allRe_=/[&<>\"]/;goog.string.unescapeEntities=function(b){return goog.string.contains(b,"&")?"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(b):goog.string.unescapePureXmlEntities_(b):b};
goog.string.unescapeEntitiesUsingDom_=function(b){var f={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},d=document.createElement("div");return b.replace(goog.string.HTML_ENTITY_PATTERN_,function(b,j){var i=f[b];if(i)return i;if(j.charAt(0)=="#"){var l=Number("0"+j.substr(1));isNaN(l)||(i=String.fromCharCode(l))}if(!i)d.innerHTML=b+" ",i=d.firstChild.nodeValue.slice(0,-1);return f[b]=i})};
goog.string.unescapePureXmlEntities_=function(b){return b.replace(/&([^;]+);/g,function(b,d){switch(d){case "amp":return"&";case "lt":return"<";case "gt":return">";case "quot":return'"';default:if(d.charAt(0)=="#"){var h=Number("0"+d.substr(1));if(!isNaN(h))return String.fromCharCode(h)}return b}})};goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g;goog.string.whitespaceEscape=function(b,f){return goog.string.newLineToBr(b.replace(/  /g," &#160;"),f)};
goog.string.stripQuotes=function(b,f){for(var d=f.length,h=0;h<d;h++){var j=d==1?f:f.charAt(h);if(b.charAt(0)==j&&b.charAt(b.length-1)==j)return b.substring(1,b.length-1)}return b};goog.string.truncate=function(b,f,d){d&&(b=goog.string.unescapeEntities(b));b.length>f&&(b=b.substring(0,f-3)+"...");d&&(b=goog.string.htmlEscape(b));return b};
goog.string.truncateMiddle=function(b,f,d,h){d&&(b=goog.string.unescapeEntities(b));if(h&&b.length>f){h>f&&(h=f);var j=b.length-h,b=b.substring(0,f-h)+"..."+b.substring(j)}else b.length>f&&(h=Math.floor(f/2),j=b.length-h,h+=f%2,b=b.substring(0,h)+"..."+b.substring(j));d&&(b=goog.string.htmlEscape(b));return b};goog.string.specialEscapeChars_={"\x00":"\\0","\u0008":"\\b","\u000c":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\u000b":"\\x0B",'"':'\\"',"\\":"\\\\"};goog.string.jsEscapeCache_={"'":"\\'"};
goog.string.quote=function(b){b=String(b);if(b.quote)return b.quote();else{for(var f=['"'],d=0;d<b.length;d++){var h=b.charAt(d),j=h.charCodeAt(0);f[d+1]=goog.string.specialEscapeChars_[h]||(j>31&&j<127?h:goog.string.escapeChar(h))}f.push('"');return f.join("")}};goog.string.escapeString=function(b){for(var f=[],d=0;d<b.length;d++)f[d]=goog.string.escapeChar(b.charAt(d));return f.join("")};
goog.string.escapeChar=function(b){if(b in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[b];if(b in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[b]=goog.string.specialEscapeChars_[b];var f=b,d=b.charCodeAt(0);if(d>31&&d<127)f=b;else{if(d<256){if(f="\\x",d<16||d>256)f+="0"}else f="\\u",d<4096&&(f+="0");f+=d.toString(16).toUpperCase()}return goog.string.jsEscapeCache_[b]=f};goog.string.toMap=function(b){for(var f={},d=0;d<b.length;d++)f[b.charAt(d)]=true;return f};
goog.string.contains=function(b,f){return b.indexOf(f)!=-1};goog.string.countOf=function(b,f){return b&&f?b.split(f).length-1:0};goog.string.removeAt=function(b,f,d){var h=b;f>=0&&f<b.length&&d>0&&(h=b.substr(0,f)+b.substr(f+d,b.length-f-d));return h};goog.string.remove=function(b,f){var d=RegExp(goog.string.regExpEscape(f),"");return b.replace(d,"")};goog.string.removeAll=function(b,f){var d=RegExp(goog.string.regExpEscape(f),"g");return b.replace(d,"")};
goog.string.regExpEscape=function(b){return String(b).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};goog.string.repeat=function(b,f){return Array(f+1).join(b)};goog.string.padNumber=function(b,f,d){b=goog.isDef(d)?b.toFixed(d):String(b);d=b.indexOf(".");if(d==-1)d=b.length;return goog.string.repeat("0",Math.max(0,f-d))+b};goog.string.makeSafe=function(b){return b==null?"":String(b)};goog.string.buildString=function(b){return Array.prototype.join.call(arguments,"")};
goog.string.getRandomString=function(){return Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^goog.now()).toString(36)};
goog.string.compareVersions=function(b,f){for(var d=0,h=goog.string.trim(String(b)).split("."),j=goog.string.trim(String(f)).split("."),i=Math.max(h.length,j.length),l=0;d==0&&l<i;l++){var q=h[l]||"",n=j[l]||"",A=RegExp("(\\d*)(\\D*)","g"),v=RegExp("(\\d*)(\\D*)","g");do{var y=A.exec(q)||["","",""],s=v.exec(n)||["","",""];if(y[0].length==0&&s[0].length==0)break;var d=y[1].length==0?0:parseInt(y[1],10),u=s[1].length==0?0:parseInt(s[1],10),d=goog.string.compareElements_(d,u)||goog.string.compareElements_(y[2].length==
0,s[2].length==0)||goog.string.compareElements_(y[2],s[2])}while(d==0)}return d};goog.string.compareElements_=function(b,f){if(b<f)return-1;else if(b>f)return 1;return 0};goog.string.HASHCODE_MAX_=4294967296;goog.string.hashCode=function(b){for(var f=0,d=0;d<b.length;++d)f=31*f+b.charCodeAt(d),f%=goog.string.HASHCODE_MAX_;return f};goog.string.uniqueStringCounter_=Math.random()*2147483648|0;goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++};
goog.string.toNumber=function(b){var f=Number(b);return f==0&&goog.string.isEmpty(b)?NaN:f};goog.string.toCamelCaseCache_={};goog.string.toCamelCase=function(b){return goog.string.toCamelCaseCache_[b]||(goog.string.toCamelCaseCache_[b]=String(b).replace(/\-([a-z])/g,function(b,d){return d.toUpperCase()}))};goog.string.toSelectorCaseCache_={};goog.string.toSelectorCase=function(b){return goog.string.toSelectorCaseCache_[b]||(goog.string.toSelectorCaseCache_[b]=String(b).replace(/([A-Z])/g,"-$1").toLowerCase())};goog.asserts={};goog.asserts.ENABLE_ASSERTS=goog.DEBUG;goog.asserts.AssertionError=function(b,f){f.unshift(b);goog.debug.Error.call(this,goog.string.subs.apply(null,f));f.shift();this.messagePattern=b};goog.inherits(goog.asserts.AssertionError,goog.debug.Error);goog.asserts.AssertionError.prototype.name="AssertionError";goog.asserts.doAssertFailure_=function(b,f,d,h){var j="Assertion failed";if(d){j+=": "+d;var i=h}else b&&(j+=": "+b,i=f);throw new goog.asserts.AssertionError(""+j,i||[]);};
goog.asserts.assert=function(b,f,d){goog.asserts.ENABLE_ASSERTS&&!b&&goog.asserts.doAssertFailure_("",null,f,Array.prototype.slice.call(arguments,2));return b};goog.asserts.fail=function(b,f){if(goog.asserts.ENABLE_ASSERTS)throw new goog.asserts.AssertionError("Failure"+(b?": "+b:""),Array.prototype.slice.call(arguments,1));};
goog.asserts.assertNumber=function(b,f,d){goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(b)&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(b),b],f,Array.prototype.slice.call(arguments,2));return b};goog.asserts.assertString=function(b,f,d){goog.asserts.ENABLE_ASSERTS&&!goog.isString(b)&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(b),b],f,Array.prototype.slice.call(arguments,2));return b};
goog.asserts.assertFunction=function(b,f,d){goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(b)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(b),b],f,Array.prototype.slice.call(arguments,2));return b};goog.asserts.assertObject=function(b,f,d){goog.asserts.ENABLE_ASSERTS&&!goog.isObject(b)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(b),b],f,Array.prototype.slice.call(arguments,2));return b};
goog.asserts.assertArray=function(b,f,d){goog.asserts.ENABLE_ASSERTS&&!goog.isArray(b)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(b),b],f,Array.prototype.slice.call(arguments,2));return b};goog.asserts.assertBoolean=function(b,f,d){goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(b)&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(b),b],f,Array.prototype.slice.call(arguments,2));return b};
goog.asserts.assertInstanceof=function(b,f,d,h){goog.asserts.ENABLE_ASSERTS&&!(b instanceof f)&&goog.asserts.doAssertFailure_("instanceof check failed.",null,d,Array.prototype.slice.call(arguments,3))};goog.array={};goog.NATIVE_ARRAY_PROTOTYPES=true;goog.array.peek=function(b){return b[b.length-1]};goog.array.ARRAY_PROTOTYPE_=Array.prototype;
goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.indexOf?function(b,f,d){goog.asserts.assert(b.length!=null);return goog.array.ARRAY_PROTOTYPE_.indexOf.call(b,f,d)}:function(b,f,d){d=d==null?0:d<0?Math.max(0,b.length+d):d;if(goog.isString(b))return!goog.isString(f)||f.length!=1?-1:b.indexOf(f,d);for(;d<b.length;d++)if(d in b&&b[d]===f)return d;return-1};
goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.lastIndexOf?function(b,f,d){goog.asserts.assert(b.length!=null);return goog.array.ARRAY_PROTOTYPE_.lastIndexOf.call(b,f,d==null?b.length-1:d)}:function(b,f,d){d=d==null?b.length-1:d;d<0&&(d=Math.max(0,b.length+d));if(goog.isString(b))return!goog.isString(f)||f.length!=1?-1:b.lastIndexOf(f,d);for(;d>=0;d--)if(d in b&&b[d]===f)return d;return-1};
goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.forEach?function(b,f,d){goog.asserts.assert(b.length!=null);goog.array.ARRAY_PROTOTYPE_.forEach.call(b,f,d)}:function(b,f,d){for(var h=b.length,j=goog.isString(b)?b.split(""):b,i=0;i<h;i++)i in j&&f.call(d,j[i],i,b)};goog.array.forEachRight=function(b,f,d){var h=b.length,j=goog.isString(b)?b.split(""):b;for(h-=1;h>=0;--h)h in j&&f.call(d,j[h],h,b)};
goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.filter?function(b,f,d){goog.asserts.assert(b.length!=null);return goog.array.ARRAY_PROTOTYPE_.filter.call(b,f,d)}:function(b,f,d){for(var h=b.length,j=[],i=0,l=goog.isString(b)?b.split(""):b,q=0;q<h;q++)if(q in l){var n=l[q];f.call(d,n,q,b)&&(j[i++]=n)}return j};
goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.map?function(b,f,d){goog.asserts.assert(b.length!=null);return goog.array.ARRAY_PROTOTYPE_.map.call(b,f,d)}:function(b,f,d){for(var h=b.length,j=Array(h),i=goog.isString(b)?b.split(""):b,l=0;l<h;l++)l in i&&(j[l]=f.call(d,i[l],l,b));return j};goog.array.reduce=function(b,f,d,h){if(b.reduce)return h?b.reduce(goog.bind(f,h),d):b.reduce(f,d);var j=d;goog.array.forEach(b,function(d,l){j=f.call(h,j,d,l,b)});return j};
goog.array.reduceRight=function(b,f,d,h){if(b.reduceRight)return h?b.reduceRight(goog.bind(f,h),d):b.reduceRight(f,d);var j=d;goog.array.forEachRight(b,function(d,l){j=f.call(h,j,d,l,b)});return j};
goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.some?function(b,f,d){goog.asserts.assert(b.length!=null);return goog.array.ARRAY_PROTOTYPE_.some.call(b,f,d)}:function(b,f,d){for(var h=b.length,j=goog.isString(b)?b.split(""):b,i=0;i<h;i++)if(i in j&&f.call(d,j[i],i,b))return true;return false};
goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.every?function(b,f,d){goog.asserts.assert(b.length!=null);return goog.array.ARRAY_PROTOTYPE_.every.call(b,f,d)}:function(b,f,d){for(var h=b.length,j=goog.isString(b)?b.split(""):b,i=0;i<h;i++)if(i in j&&!f.call(d,j[i],i,b))return false;return true};goog.array.find=function(b,f,d){f=goog.array.findIndex(b,f,d);return f<0?null:goog.isString(b)?b.charAt(f):b[f]};
goog.array.findIndex=function(b,f,d){for(var h=b.length,j=goog.isString(b)?b.split(""):b,i=0;i<h;i++)if(i in j&&f.call(d,j[i],i,b))return i;return-1};goog.array.findRight=function(b,f,d){f=goog.array.findIndexRight(b,f,d);return f<0?null:goog.isString(b)?b.charAt(f):b[f]};goog.array.findIndexRight=function(b,f,d){var h=b.length,j=goog.isString(b)?b.split(""):b;for(h-=1;h>=0;h--)if(h in j&&f.call(d,j[h],h,b))return h;return-1};goog.array.contains=function(b,f){return goog.array.indexOf(b,f)>=0};
goog.array.isEmpty=function(b){return b.length==0};goog.array.clear=function(b){if(!goog.isArray(b))for(var f=b.length-1;f>=0;f--)delete b[f];b.length=0};goog.array.insert=function(b,f){goog.array.contains(b,f)||b.push(f)};goog.array.insertAt=function(b,f,d){goog.array.splice(b,d,0,f)};goog.array.insertArrayAt=function(b,f,d){goog.partial(goog.array.splice,b,d,0).apply(null,f)};
goog.array.insertBefore=function(b,f,d){var h;arguments.length==2||(h=goog.array.indexOf(b,d))<0?b.push(f):goog.array.insertAt(b,f,h)};goog.array.remove=function(b,f){var d=goog.array.indexOf(b,f),h;(h=d>=0)&&goog.array.removeAt(b,d);return h};goog.array.removeAt=function(b,f){goog.asserts.assert(b.length!=null);return goog.array.ARRAY_PROTOTYPE_.splice.call(b,f,1).length==1};goog.array.removeIf=function(b,f,d){f=goog.array.findIndex(b,f,d);return f>=0?(goog.array.removeAt(b,f),true):false};
goog.array.concat=function(b){return goog.array.ARRAY_PROTOTYPE_.concat.apply(goog.array.ARRAY_PROTOTYPE_,arguments)};goog.array.clone=function(b){if(goog.isArray(b))return goog.array.concat(b);else{for(var f=[],d=0,h=b.length;d<h;d++)f[d]=b[d];return f}};goog.array.toArray=function(b){return goog.isArray(b)?goog.array.concat(b):goog.array.clone(b)};
goog.array.extend=function(b,f){for(var d=1;d<arguments.length;d++){var h=arguments[d],j;if(goog.isArray(h)||(j=goog.isArrayLike(h))&&h.hasOwnProperty("callee"))b.push.apply(b,h);else if(j)for(var i=b.length,l=h.length,q=0;q<l;q++)b[i+q]=h[q];else b.push(h)}};goog.array.splice=function(b,f,d,h){goog.asserts.assert(b.length!=null);return goog.array.ARRAY_PROTOTYPE_.splice.apply(b,goog.array.slice(arguments,1))};
goog.array.slice=function(b,f,d){goog.asserts.assert(b.length!=null);return arguments.length<=2?goog.array.ARRAY_PROTOTYPE_.slice.call(b,f):goog.array.ARRAY_PROTOTYPE_.slice.call(b,f,d)};goog.array.removeDuplicates=function(b,f){for(var d=f||b,h={},j=0,i=0;i<b.length;){var l=b[i++],q=goog.isObject(l)?"o"+goog.getUid(l):(typeof l).charAt(0)+l;Object.prototype.hasOwnProperty.call(h,q)||(h[q]=true,d[j++]=l)}d.length=j};
goog.array.binarySearch=function(b,f,d){return goog.array.binarySearch_(b,d||goog.array.defaultCompare,false,f)};goog.array.binarySelect=function(b,f,d){return goog.array.binarySearch_(b,f,true,void 0,d)};goog.array.binarySearch_=function(b,f,d,h,j){for(var i=0,l=b.length,q;i<l;){var n=i+l>>1,A;A=d?f.call(j,b[n],n,b):f(h,b[n]);A>0?i=n+1:(l=n,q=!A)}return q?i:~i};goog.array.sort=function(b,f){goog.asserts.assert(b.length!=null);goog.array.ARRAY_PROTOTYPE_.sort.call(b,f||goog.array.defaultCompare)};
goog.array.stableSort=function(b,f){for(var d=0;d<b.length;d++)b[d]={index:d,value:b[d]};var h=f||goog.array.defaultCompare;goog.array.sort(b,function(b,f){return h(b.value,f.value)||b.index-f.index});for(d=0;d<b.length;d++)b[d]=b[d].value};goog.array.sortObjectsByKey=function(b,f,d){var h=d||goog.array.defaultCompare;goog.array.sort(b,function(b,d){return h(b[f],d[f])})};
goog.array.isSorted=function(b,f,d){for(var f=f||goog.array.defaultCompare,h=1;h<b.length;h++){var j=f(b[h-1],b[h]);if(j>0||j==0&&d)return false}return true};goog.array.equals=function(b,f,d){if(!goog.isArrayLike(b)||!goog.isArrayLike(f)||b.length!=f.length)return false;for(var h=b.length,d=d||goog.array.defaultCompareEquality,j=0;j<h;j++)if(!d(b[j],f[j]))return false;return true};goog.array.compare=function(b,f,d){return goog.array.equals(b,f,d)};
goog.array.compare3=function(b,f,d){for(var d=d||goog.array.defaultCompare,h=Math.min(b.length,f.length),j=0;j<h;j++){var i=d(b[j],f[j]);if(i!=0)return i}return goog.array.defaultCompare(b.length,f.length)};goog.array.defaultCompare=function(b,f){return b>f?1:b<f?-1:0};goog.array.defaultCompareEquality=function(b,f){return b===f};goog.array.binaryInsert=function(b,f,d){d=goog.array.binarySearch(b,f,d);return d<0?(goog.array.insertAt(b,f,-(d+1)),true):false};
goog.array.binaryRemove=function(b,f,d){f=goog.array.binarySearch(b,f,d);return f>=0?goog.array.removeAt(b,f):false};goog.array.bucket=function(b,f){for(var d={},h=0;h<b.length;h++){var j=b[h],i=f(j,h,b);goog.isDef(i)&&(d[i]||(d[i]=[])).push(j)}return d};goog.array.repeat=function(b,f){for(var d=[],h=0;h<f;h++)d[h]=b;return d};goog.array.flatten=function(b){for(var f=[],d=0;d<arguments.length;d++){var h=arguments[d];goog.isArray(h)?f.push.apply(f,goog.array.flatten.apply(null,h)):f.push(h)}return f};
goog.array.rotate=function(b,f){goog.asserts.assert(b.length!=null);b.length&&(f%=b.length,f>0?goog.array.ARRAY_PROTOTYPE_.unshift.apply(b,b.splice(-f,f)):f<0&&goog.array.ARRAY_PROTOTYPE_.push.apply(b,b.splice(0,-f)));return b};goog.array.zip=function(b){if(!arguments.length)return[];for(var f=[],d=0;;d++){for(var h=[],j=0;j<arguments.length;j++){var i=arguments[j];if(d>=i.length)return f;h.push(i[d])}f.push(h)}};
goog.array.shuffle=function(b,f){for(var d=f||Math.random,h=b.length-1;h>0;h--){var j=Math.floor(d()*(h+1)),i=b[h];b[h]=b[j];b[j]=i}};glslunit.NumberShaderVariable=function(b,f){glslunit.ShaderVariable.call(this,b);this.values_=f;this.buffer_=this.bufferType_=null;this.bufferValueSize_=0};goog.inherits(glslunit.NumberShaderVariable,glslunit.ShaderVariable);glslunit.NumberShaderVariable.prototype.setBufferType=function(b){this.bufferType_=b};
glslunit.NumberShaderVariable.decomposeType_=function(b){var f=false,d;b=="float"?(d="f",b="1"):b=="int"||b=="bool"?(d="i",b="1"):(b.slice(0,3)=="mat"?(f=true,d="f"):b[0]=="i"||b[0]=="b"?(d="i",b=b.slice(1)):d="f",b=b.slice(3));return{glslType:d,size:b,isMatrix:f}};glslunit.NumberShaderVariable.prototype.getBufferType_=function(b){return this.bufferType_?this.bufferType_:b=="i"?Int32Array:Float32Array};
glslunit.NumberShaderVariable.prototype.bufferData=function(b,f,d){var h=this.getTypeName();if(h=="sampler2D")throw"Error while buffering "+this.getName()+": Expected a texture but got a numeric variable";var j=glslunit.NumberShaderVariable.decomposeType_(h),i=j.size;j.isMatrix&&(i*=i);if(this.values_.length!=i)throw"Error while buffering "+this.getName()+": Expected a variable of length "+i+" for a "+h+", but got a variable of length "+this.values_.length;h=this.getQualifierType();i=goog.array.clone(this.values_);
if(h==glslunit.ShaderVariable.QualifierType.ATTRIBUTE)for(var l=0;l<d-1;l++)[].push.apply(i,this.values_);d=new (this.getBufferType_(j.glslType))(i);h==glslunit.ShaderVariable.QualifierType.UNIFORM?(h="uniform"+(j.isMatrix?"Matrix":"")+j.size+j.glslType+"v",j.isMatrix?b[h].apply(b,[this.getLocation(b,f),false,d]):b[h].apply(b,[this.getLocation(b,f),d])):h==glslunit.ShaderVariable.QualifierType.ATTRIBUTE&&this.bufferAttribute(b,f,parseInt(j.size,10),d)};
glslunit.NumberShaderVariable.prototype.bufferAttribute=function(b,f,d,h){this.buffer_=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,this.buffer_);b.bufferData(b.ARRAY_BUFFER,h,b.STATIC_DRAW);b.bindBuffer(b.ARRAY_BUFFER,null);this.bufferValueSize_=d};
glslunit.NumberShaderVariable.prototype.bindData=function(b,f){if(this.buffer_&&this.bufferValueSize_){var d=this.getLocation(b,f);b.bindBuffer(b.ARRAY_BUFFER,this.buffer_);b.vertexAttribPointer(Number(d),this.bufferValueSize_,b.FLOAT,false,0,0);b.bindBuffer(b.ARRAY_BUFFER,null)}};glslunit.NumberShaderVariable.prototype.cleanUp=function(b){glslunit.NumberShaderVariable.superClass_.cleanUp.call(this,b);this.buffer_&&b.deleteBuffer(this.buffer_)};glslunit.testing={};glslunit.testing.InputValue=function(){};glslunit.testing.InputValue.prototype.getShaderVariable=function(){};goog.object={};goog.object.forEach=function(b,f,d){for(var h in b)f.call(d,b[h],h,b)};goog.object.filter=function(b,f,d){var h={},j;for(j in b)f.call(d,b[j],j,b)&&(h[j]=b[j]);return h};goog.object.map=function(b,f,d){var h={},j;for(j in b)h[j]=f.call(d,b[j],j,b);return h};goog.object.some=function(b,f,d){for(var h in b)if(f.call(d,b[h],h,b))return true;return false};goog.object.every=function(b,f,d){for(var h in b)if(!f.call(d,b[h],h,b))return false;return true};
goog.object.getCount=function(b){var f=0,d;for(d in b)f++;return f};goog.object.getAnyKey=function(b){for(var f in b)return f};goog.object.getAnyValue=function(b){for(var f in b)return b[f]};goog.object.contains=function(b,f){return goog.object.containsValue(b,f)};goog.object.getValues=function(b){var f=[],d=0,h;for(h in b)f[d++]=b[h];return f};goog.object.getKeys=function(b){var f=[],d=0,h;for(h in b)f[d++]=h;return f};
goog.object.getValueByKeys=function(b,f){for(var d=goog.isArrayLike(f),h=d?f:arguments,d=d?0:1;d<h.length;d++)if(b=b[h[d]],!goog.isDef(b))break;return b};goog.object.containsKey=function(b,f){return f in b};goog.object.containsValue=function(b,f){for(var d in b)if(b[d]==f)return true;return false};goog.object.findKey=function(b,f,d){for(var h in b)if(f.call(d,b[h],h,b))return h};goog.object.findValue=function(b,f,d){return(f=goog.object.findKey(b,f,d))&&b[f]};
goog.object.isEmpty=function(b){for(var f in b)return false;return true};goog.object.clear=function(b){for(var f in b)delete b[f]};goog.object.remove=function(b,f){var d;(d=f in b)&&delete b[f];return d};goog.object.add=function(b,f,d){if(f in b)throw Error('The object already contains the key "'+f+'"');goog.object.set(b,f,d)};goog.object.get=function(b,f,d){return f in b?b[f]:d};goog.object.set=function(b,f,d){b[f]=d};goog.object.setIfUndefined=function(b,f,d){return f in b?b[f]:b[f]=d};
goog.object.clone=function(b){var f={},d;for(d in b)f[d]=b[d];return f};goog.object.unsafeClone=function(b){var f=goog.typeOf(b);if(f=="object"||f=="array"){if(b.clone)return b.clone();var f=f=="array"?[]:{},d;for(d in b)f[d]=goog.object.unsafeClone(b[d]);return f}return b};goog.object.transpose=function(b){var f={},d;for(d in b)f[b[d]]=d;return f};goog.object.PROTOTYPE_FIELDS_="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");
goog.object.extend=function(b,f){for(var d,h,j=1;j<arguments.length;j++){h=arguments[j];for(d in h)b[d]=h[d];for(var i=0;i<goog.object.PROTOTYPE_FIELDS_.length;i++)d=goog.object.PROTOTYPE_FIELDS_[i],Object.prototype.hasOwnProperty.call(h,d)&&(b[d]=h[d])}};
goog.object.create=function(b){var f=arguments.length;if(f==1&&goog.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(f%2)throw Error("Uneven number of arguments");for(var d={},h=0;h<f;h+=2)d[arguments[h]]=arguments[h+1];return d};goog.object.createSet=function(b){var f=arguments.length;if(f==1&&goog.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var d={},h=0;h<f;h++)d[arguments[h]]=true;return d};glslunit.utils={};glslunit.utils.getFunctionSuffix=function(b){return glslunit.utils.toTitleOrCamelCase(b,true)};glslunit.utils.toTitleOrCamelCase=function(b,f){var d=b.split("_").map(function(b){return b.slice(0,1).toUpperCase()+b.slice(1).toLowerCase()}).join("");f||(d=d.slice(0,1).toLowerCase()+d.slice(1));return d};glslunit.ASTVisitor=function(){};glslunit.ASTVisitor.prototype.getBeforeVisitFunction=function(b){return this["beforeVisit"+glslunit.utils.getFunctionSuffix(b.type)]};glslunit.ASTVisitor.prototype.getAfterVisitFunction=function(b){return this["afterVisit"+glslunit.utils.getFunctionSuffix(b.type)]};glslunit.ASTVisitor.prototype.getVisitFunction=function(b){return this["visit"+glslunit.utils.getFunctionSuffix(b.type)]};
glslunit.ASTVisitor.prototype.visitNode=function(b){if(b&&b.type){var f=this.getBeforeVisitFunction(b);f&&f.apply(this,[b]);(f=this.getVisitFunction(b))?f.apply(this,[b]):this.genericVisitor(b);(f=this.getAfterVisitFunction(b))&&f.apply(this,[b])}};glslunit.ASTVisitor.prototype.visitList=function(b){goog.array.forEach(b,function(b){this.visitNode(b)},this)};
glslunit.ASTVisitor.prototype.genericVisitor=function(b){for(var f in b){var d=b[f];goog.isArray(d)?this.visitList(d):goog.isObject(d)&&d.type&&this.visitNode(d)}};glslunit.ASTTransformer=function(){this.mixed_in_visitors_=[]};glslunit.ASTTransformer.nextId_=-1;glslunit.ASTTransformer.getNextId=function(){return glslunit.ASTTransformer.nextId_--};glslunit.ASTTransformer.cloneNode=function(b){b=goog.object.clone(b);b.id=glslunit.ASTTransformer.getNextId();return b};glslunit.ASTTransformer.prototype.mixinVisitor=function(b){this.mixed_in_visitors_.push(b)};glslunit.ASTTransformer.prototype.getTransformFunction=function(b){return this["transform"+glslunit.utils.getFunctionSuffix(b.type)]};
glslunit.ASTTransformer.prototype.mixinVisitFunctions_=function(b,f,d){var h=this[f+glslunit.utils.getFunctionSuffix(b.type)];return goog.bind(function(b){goog.array.forEach(this.mixed_in_visitors_,function(f){var h=d(f).apply(f,[b]);h&&h.apply(f,[b])});h&&h.apply(this,[b])},this)};glslunit.ASTTransformer.prototype.getBeforeTransformFunction=function(b){return this.mixinVisitFunctions_(b,"beforeTransform",function(b){return b.getBeforeVisitFunction})};
glslunit.ASTTransformer.prototype.getAfterTransformFunction=function(b){return this.mixinVisitFunctions_(b,"afterTransform",function(b){return b.getAfterVisitFunction})};
glslunit.ASTTransformer.prototype.transformNode=function(b){var f=false,d=this.getBeforeTransformFunction(b);d&&d.apply(this,[b]);var d=glslunit.ASTTransformer.cloneNode(b),h;for(h in b){var j=b[h];if(goog.isArray(j)){d[h]=[];for(var i=0;i<j.length;i++){var l=j[i],q=this.transformNode(l);q!=l&&(f=true);q!=null&&Array.prototype.push.apply(d[h],goog.isArray(q)?q:[q])}}else j.type&&(q=this.transformNode(j),q!=j&&(f=true,q!=null?d[h]=q:delete d[h]))}h=this.getTransformFunction(b);d=f?d:b;h&&(d=h.apply(this,
[d,b]));(f=this.getAfterTransformFunction(b))&&f.apply(this,[b,d]);return d};glslunit.FunctionRenameTransformer=function(b,f){glslunit.ASTTransformer.call(this);this.targetPrototype_=b;this.newName_=f};goog.inherits(glslunit.FunctionRenameTransformer,glslunit.ASTTransformer);glslunit.FunctionRenameTransformer.functionPrototypeEquals=function(b,f){return goog.array.equals(b.parameters,f.parameters,function(b,f){return b.type_name==f.type_name})&&b.name==f.name&&b.returnType.name==f.returnType.name?true:false};
glslunit.FunctionRenameTransformer.prototype.transformFunctionDeclaration=function(b){var f=b;if(glslunit.FunctionRenameTransformer.functionPrototypeEquals(b,this.targetPrototype_))f=glslunit.ASTTransformer.cloneNode(b),f.name=this.newName_;return f};glslunit.FunctionRenameTransformer.prototype.transformFunctionPrototype=glslunit.FunctionRenameTransformer.prototype.transformFunctionDeclaration;
glslunit.FunctionRenameTransformer.prototype.transformFunctionCall=function(b){var f=b;if(b.function_name==this.targetPrototype_.name&&b.parameters.length==this.targetPrototype_.parameters.length)f=glslunit.ASTTransformer.cloneNode(b),f.function_name=this.newName_;return f};glslunit.Generator=function(b,f){glslunit.ASTVisitor.call(this);this.newline_str_=b||"\n";this.debug_=!!f;this.sourceCode_="";this.currentIndent_=0};goog.inherits(glslunit.Generator,glslunit.ASTVisitor);glslunit.Generator.INDENT_STR_="  ";glslunit.Generator.EvaluationOrder_={LTR:0,RTL:1,NA:2};glslunit.Generator.OperationEvaluation_=function(b,f,d,h){this.precedence=b;this.evaluationOrder=f||glslunit.Generator.EvaluationOrder_.LTR;this.associative=!!d;this.maxOperands=h||2};
glslunit.Generator.ORDER_OF_OPERATIONS_={function_call:new glslunit.Generator.OperationEvaluation_(0,glslunit.Generator.EvaluationOrder_.NA),identifier:new glslunit.Generator.OperationEvaluation_(0,glslunit.Generator.EvaluationOrder_.NA),"float":new glslunit.Generator.OperationEvaluation_(0,glslunit.Generator.EvaluationOrder_.NA),"int":new glslunit.Generator.OperationEvaluation_(0,glslunit.Generator.EvaluationOrder_.NA),bool:new glslunit.Generator.OperationEvaluation_(0,glslunit.Generator.EvaluationOrder_.NA),
postfix:new glslunit.Generator.OperationEvaluation_(1,glslunit.Generator.EvaluationOrder_.LTR,false,1),unary:new glslunit.Generator.OperationEvaluation_(2,glslunit.Generator.EvaluationOrder_.RTL,false,1),"*":new glslunit.Generator.OperationEvaluation_(3,glslunit.Generator.EvaluationOrder_.LTR,true),"/":new glslunit.Generator.OperationEvaluation_(3),"%":new glslunit.Generator.OperationEvaluation_(3),"+":new glslunit.Generator.OperationEvaluation_(4,glslunit.Generator.EvaluationOrder_.LTR,true),"-":new glslunit.Generator.OperationEvaluation_(4),
"<<":new glslunit.Generator.OperationEvaluation_(5),">>":new glslunit.Generator.OperationEvaluation_(5),"<":new glslunit.Generator.OperationEvaluation_(6),">":new glslunit.Generator.OperationEvaluation_(6),"<=":new glslunit.Generator.OperationEvaluation_(6),">=":new glslunit.Generator.OperationEvaluation_(6),"==":new glslunit.Generator.OperationEvaluation_(7),"!=":new glslunit.Generator.OperationEvaluation_(7),"&":new glslunit.Generator.OperationEvaluation_(8,glslunit.Generator.EvaluationOrder_.LTR,
true),"^":new glslunit.Generator.OperationEvaluation_(9,glslunit.Generator.EvaluationOrder_.LTR,true),"|":new glslunit.Generator.OperationEvaluation_(10,glslunit.Generator.EvaluationOrder_.LTR,true),"&&":new glslunit.Generator.OperationEvaluation_(11,glslunit.Generator.EvaluationOrder_.LTR,true),"^^":new glslunit.Generator.OperationEvaluation_(12,glslunit.Generator.EvaluationOrder_.LTR,true),"||":new glslunit.Generator.OperationEvaluation_(13,glslunit.Generator.EvaluationOrder_.LTR,true),ternary:new glslunit.Generator.OperationEvaluation_(14,
glslunit.Generator.EvaluationOrder_.RTL,false,3),"=":new glslunit.Generator.OperationEvaluation_(15),"-=":new glslunit.Generator.OperationEvaluation_(15),"+=":new glslunit.Generator.OperationEvaluation_(15),"*=":new glslunit.Generator.OperationEvaluation_(15),"/=":new glslunit.Generator.OperationEvaluation_(15),"%=":new glslunit.Generator.OperationEvaluation_(15),"<<=":new glslunit.Generator.OperationEvaluation_(15),">>=":new glslunit.Generator.OperationEvaluation_(15),"&=":new glslunit.Generator.OperationEvaluation_(15),
"^=":new glslunit.Generator.OperationEvaluation_(15),"|=":new glslunit.Generator.OperationEvaluation_(15)};glslunit.Generator.getNodePrecedence_=function(b){return glslunit.Generator.ORDER_OF_OPERATIONS_[glslunit.Generator.getNodeOperator_(b)]};glslunit.Generator.getNodeOperator_=function(b){return b.type=="binary"?b.operator.operator:b.type};glslunit.Generator.getSourceCode=function(b,f,d){f=new glslunit.Generator(f,d);f.visitNode(b);return f.sourceCode_};
glslunit.Generator.prototype.checkAndAdd=function(b,f,d){return f?b+f+d:""};glslunit.Generator.prototype.addNodesWithJoin_=function(b,f){for(var d=0;d<b.length;d++)d!=0&&(this.sourceCode_+=f),this.visitNode(b[d])};glslunit.Generator.prototype.maybePrintNewline_=function(){this.debug_&&(this.sourceCode_+=this.newline_str_+Array(this.currentIndent_+1).join(glslunit.Generator.INDENT_STR_))};
glslunit.Generator.prototype.maybeUnindent_=function(){if(this.debug_&&this.sourceCode_.slice(-1*glslunit.Generator.INDENT_STR_.length)==glslunit.Generator.INDENT_STR_)this.sourceCode_=this.sourceCode_.slice(0,-1*glslunit.Generator.INDENT_STR_.length)};
glslunit.Generator.prototype.visitStructDefinition=function(b){this.sourceCode_+=this.checkAndAdd("",b.qualifier," ");this.sourceCode_+="struct";this.sourceCode_+=this.checkAndAdd(" ",b.name,"");this.sourceCode_+="{";this.currentIndent_++;this.addNodesWithJoin_(b.members,"");this.currentIndent_--;this.maybeUnindent_();this.sourceCode_+="}";b.declarators&&this.addNodesWithJoin_(b.declarators,",");this.sourceCode_+=";";this.maybePrintNewline_()};
glslunit.Generator.prototype.visitScope=function(b){this.sourceCode_+="{";this.currentIndent_++;this.maybePrintNewline_();this.addNodesWithJoin_(b.statements,"");this.currentIndent_--;this.maybeUnindent_();this.sourceCode_+="}";this.maybePrintNewline_()};glslunit.Generator.prototype.visitPrecision=function(b){this.sourceCode_+="precision "+b.precision+" "+b.typeName+";";this.maybePrintNewline_()};
glslunit.Generator.prototype.visitInvariant=function(b){this.sourceCode_+="invariant ";this.addNodesWithJoin_(b.identifiers,",");this.sourceCode_+=";";this.maybePrintNewline_()};
glslunit.Generator.prototype.visitParameter=function(b){this.sourceCode_+=this.checkAndAdd("",b.typeQualifier," ");this.sourceCode_+=this.checkAndAdd("",b.parameterQualifier," ");this.sourceCode_+=this.checkAndAdd("",b.precision," ");this.sourceCode_+=b.type_name+" "+b.name;b.arraySize&&(this.sourceCode_+="[",this.visitNode(b.arraySize),this.sourceCode_+="]")};
glslunit.Generator.prototype.generateFunctionPrototype_=function(b){this.visitNode(b.returnType);this.sourceCode_+=" "+b.name+"(";this.addNodesWithJoin_(b.parameters,",");this.sourceCode_+=")"};glslunit.Generator.prototype.visitFunctionPrototype=function(b){this.generateFunctionPrototype_(b);this.sourceCode_+=";";this.maybePrintNewline_()};glslunit.Generator.prototype.visitFunctionDeclaration=function(b){this.generateFunctionPrototype_(b);this.visitNode(b.body)};
glslunit.Generator.prototype.visitPreprocessor=function(b){var f=this.sourceCode_.slice(-1*this.newline_str_.length);f&&f!=this.newline_str_&&(this.sourceCode_+=this.newline_str_);this.sourceCode_+=b.directive;this.sourceCode_+=this.checkAndAdd(" ",b.value,"");this.sourceCode_+=this.newline_str_;b.guarded_statements&&(this.addNodesWithJoin_(b.guarded_statements,""),b.elseBody&&this.visitNode(b.elseBody),b.directive.slice(0,3)=="#if"&&(f=this.sourceCode_.slice(-1*this.newline_str_.length),f!=this.newline_str_&&
(this.sourceCode_+=this.newline_str_),this.sourceCode_+="#endif"+this.newline_str_))};glslunit.Generator.prototype.generateWhile_=function(b){this.sourceCode_+="while(";this.visitNode(b.condition);this.sourceCode_+=")"};glslunit.Generator.prototype.visitDoStatement=function(b){this.sourceCode_+="do ";this.visitNode(b.body);this.generateWhile_(b)};glslunit.Generator.prototype.visitWhileStatement=function(b){this.generateWhile_(b);this.visitNode(b.body)};
glslunit.Generator.prototype.visitForStatement=function(b){this.sourceCode_+="for(";this.visitNode(b.initializer);this.visitNode(b.condition);this.sourceCode_+=";";this.visitNode(b.increment);this.sourceCode_+=")";this.visitNode(b.body)};glslunit.Generator.prototype.visitIfStatement=function(b){this.sourceCode_+="if(";this.visitNode(b.condition);this.sourceCode_+=")";this.visitNode(b.body);b.elseBody&&(this.sourceCode_+="else ",this.visitNode(b.elseBody))};
glslunit.Generator.prototype.visitDeclaratorItem=function(b){this.visitNode(b.name);b.isArray&&(this.sourceCode_+="[",b.arraySize&&this.visitNode(b.arraySize),this.sourceCode_+="]");b.initializer&&(this.sourceCode_+="=",this.visitNode(b.initializer))};glslunit.Generator.prototype.visitDeclarator=function(b){this.visitNode(b.typeAttribute);this.sourceCode_+=" ";this.addNodesWithJoin_(b.declarators,",");this.sourceCode_+=";";this.maybePrintNewline_()};
glslunit.Generator.prototype.visitType=function(b){this.sourceCode_+=this.checkAndAdd("",b.qualifier," ");this.sourceCode_+=this.checkAndAdd("",b.precision," ");this.sourceCode_+=b.name};glslunit.Generator.prototype.visitExpression=function(b){this.visitNode(b.expression);this.sourceCode_+=";";this.maybePrintNewline_()};glslunit.Generator.prototype.visitJump=function(b){this.sourceCode_+=b.type;b.value&&(this.sourceCode_+=" ",this.visitNode(b.value));this.sourceCode_+=";";this.maybePrintNewline_()};
glslunit.Generator.prototype.visitReturn=glslunit.Generator.prototype.visitJump;glslunit.Generator.prototype.visitBreak=glslunit.Generator.prototype.visitJump;glslunit.Generator.prototype.visitDiscard=glslunit.Generator.prototype.visitJump;glslunit.Generator.prototype.visitContinue=glslunit.Generator.prototype.visitJump;
glslunit.Generator.prototype.visitUnary=function(b){this.sourceCode_.slice(-1)==b.operator.operator&&(this.sourceCode_+=" ");this.visitNode(b.operator);this.maybeParenthizeNode_(b.expression,b,0)};glslunit.Generator.prototype.visitPostfix=function(b){this.maybeParenthizeNode_(b.expression,b,0);this.visitNode(b.operator)};glslunit.Generator.prototype.visitOperator=function(b){this.sourceCode_+=b.operator};glslunit.Generator.prototype.visitFieldSelector=function(b){this.sourceCode_+="."+b.selection};
glslunit.Generator.prototype.visitAccessor=function(b){this.sourceCode_+="[";this.visitNode(b.index);this.sourceCode_+="]"};glslunit.Generator.prototype.visitFunctionCall=function(b){this.sourceCode_+=b.function_name+"(";this.addNodesWithJoin_(b.parameters,",");this.sourceCode_+=")"};glslunit.Generator.prototype.visitIdentifier=function(b){this.sourceCode_+=b.name};
glslunit.Generator.formatFloat=function(b){if(b==0)return"0.";var f=(""+b).toLowerCase().replace("+","").replace(/^0*/g,"");if(f.indexOf("e")!=-1)return f;f.indexOf(".")==-1&&(f+=".");var f=f.replace(/0*$/g,""),d=Math.abs(b),h=Math.floor(Math.log(d)/Math.LN10),b=(b<0?"-":"")+d/Math.pow(10,h)+"e"+h;return f.length<=b.length?f:b};glslunit.Generator.formatInt=function(b){var f=b.toString(10),b=(b<0?"-":"")+"0x"+Math.abs(b).toString(16).toLowerCase();return f.length<=b.length?f:b};
glslunit.Generator.prototype.visitFloat=function(b){this.sourceCode_+=glslunit.Generator.formatFloat(b.value)};glslunit.Generator.prototype.visitValue=function(b){this.sourceCode_+=b.value};glslunit.Generator.prototype.visitInt=function(b){this.sourceCode_+=glslunit.Generator.formatInt(b.value)};glslunit.Generator.prototype.visitBool=glslunit.Generator.prototype.visitValue;
glslunit.Generator.prototype.visitBinary=function(b){this.maybeParenthizeNode_(b.left,b,0);this.visitNode(b.operator);this.maybeParenthizeNode_(b.right,b,1)};glslunit.Generator.prototype.visitTernary=function(b){this.maybeParenthizeNode_(b.condition,b,0);this.sourceCode_+="?";this.maybeParenthizeNode_(b.is_true,b,1);this.sourceCode_+=":";this.maybeParenthizeNode_(b.is_false,b,2)};
glslunit.Generator.prototype.maybeParenthizeNode_=function(b,f,d){var h=glslunit.Generator.getNodePrecedence_(b),j=glslunit.Generator.getNodePrecedence_(f),i=false;h.precedence>j.precedence?i=true:h.precedence==j.precedence?(i=glslunit.Generator.getNodeOperator_(b),f=glslunit.Generator.getNodeOperator_(f),i=j.evaluationOrder==glslunit.Generator.EvaluationOrder_.LTR&&d==0||j.evaluationOrder==glslunit.Generator.EvaluationOrder_.RTL&&d==j.maxOperands-1?false:i==f&&h.associative?false:true):i=false;i&&
(this.sourceCode_+="(");this.visitNode(b);i&&(this.sourceCode_+=")")};glslunit.glsl={};
glslunit.glsl.parser=function(){var b={parse:function(b,d){function h(b){var a=b.charCodeAt(0),c;a<=255?(b="x",c=2):(b="u",c=4);var b="\\"+b,e=a.toString(16).toUpperCase(),a=e;c-=e.length;for(e=0;e<c;e++)a="0"+a;return b+a}function j(b){return'"'+b.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,h)+'"'}function i(b){c<P||(c>P&&(P=c,wa=[]),wa.push(b))}
function l(){var d="newLine@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g;g=c;/^[\n]/.test(b.charAt(c))?(a=b.charAt(c),c++):(a=null,k===0&&i("[\\n]"));a!==null&&(a="\n");a===null&&(c=g);m[d]={nextPos:c,result:a};return a}function q(){var d="EOF@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g;g=c;k++;b.length>c?(a=b.charAt(c),c++):(a=null,k===0&&i("any character"));k--;a===null?a="":(a=null,c=g);m[d]={nextPos:c,result:a};return a}function n(){var d="_@"+c,a=m[d];if(a)return c=a.nextPos,a.result;
var g;k++;g=l();g===null&&(/^[\r\t\f\x0B ]/.test(b.charAt(c))?(g=b.charAt(c),c++):(g=null,k===0&&i("[\\r\\t\\f\\x0B ]")),g===null&&(g=y()));if(g!==null)for(a=[];g!==null;)a.push(g),g=l(),g===null&&(/^[\r\t\f\x0B ]/.test(b.charAt(c))?(g=b.charAt(c),c++):(g=null,k===0&&i("[\\r\\t\\f\\x0B ]")),g===null&&(g=y()));else a=null;k--;k===0&&a===null&&i("whitespace");m[d]={nextPos:c,result:a};return a}function A(){var d="noNewlineComment@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,o,p,h;p=c;b.substr(c,
2)==="/*"?(a="/*",c+=2):(a=null,k===0&&i('"/*"'));if(a!==null){g=[];o=h=c;k++;b.substr(c,2)==="*/"?(e="*/",c+=2):(e=null,k===0&&i('"*/"'));k--;e===null?e="":(e=null,c=o);e!==null?(b.length>c?(o=b.charAt(c),c++):(o=null,k===0&&i("any character")),o!==null?e=[e,o]:(e=null,c=h)):(e=null,c=h);for(;e!==null;)g.push(e),o=h=c,k++,b.substr(c,2)==="*/"?(e="*/",c+=2):(e=null,k===0&&i('"*/"')),k--,e===null?e="":(e=null,c=o),e!==null?(b.length>c?(o=b.charAt(c),c++):(o=null,k===0&&i("any character")),o!==null?
e=[e,o]:(e=null,c=h)):(e=null,c=h);g!==null?(b.substr(c,2)==="*/"?(e="*/",c+=2):(e=null,k===0&&i('"*/"')),e!==null?a=[a,g,e]:(a=null,c=p)):(a=null,c=p)}else a=null,c=p;if(a===null)if(p=c,b.substr(c,2)==="//"?(a="//",c+=2):(a=null,k===0&&i('"//"')),a!==null){g=[];/^[^\n]/.test(b.charAt(c))?(e=b.charAt(c),c++):(e=null,k===0&&i("[^\\n]"));for(;e!==null;)g.push(e),/^[^\n]/.test(b.charAt(c))?(e=b.charAt(c),c++):(e=null,k===0&&i("[^\\n]"));g!==null?a=[a,g]:(a=null,c=p)}else a=null,c=p;m[d]={nextPos:c,result:a};
return a}function v(){var d="noNewlineWhitespace@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g;/^[\r\t\f\x0B ]/.test(b.charAt(c))?(g=b.charAt(c),c++):(g=null,k===0&&i("[\\r\\t\\f\\x0B ]"));g===null&&(g=A());if(g!==null)for(a=[];g!==null;)a.push(g),/^[\r\t\f\x0B ]/.test(b.charAt(c))?(g=b.charAt(c),c++):(g=null,k===0&&i("[\\r\\t\\f\\x0B ]")),g===null&&(g=A());else a=null;m[d]={nextPos:c,result:a};return a}function y(){var d="comment@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,o,p,h;k++;
p=c;b.substr(c,2)==="/*"?(a="/*",c+=2):(a=null,k===0&&i('"/*"'));if(a!==null){g=[];o=h=c;k++;b.substr(c,2)==="*/"?(e="*/",c+=2):(e=null,k===0&&i('"*/"'));k--;e===null?e="":(e=null,c=o);e!==null?(b.length>c?(o=b.charAt(c),c++):(o=null,k===0&&i("any character")),o!==null?e=[e,o]:(e=null,c=h)):(e=null,c=h);for(;e!==null;)g.push(e),o=h=c,k++,b.substr(c,2)==="*/"?(e="*/",c+=2):(e=null,k===0&&i('"*/"')),k--,e===null?e="":(e=null,c=o),e!==null?(b.length>c?(o=b.charAt(c),c++):(o=null,k===0&&i("any character")),
o!==null?e=[e,o]:(e=null,c=h)):(e=null,c=h);g!==null?(b.substr(c,2)==="*/"?(e="*/",c+=2):(e=null,k===0&&i('"*/"')),e!==null?a=[a,g,e]:(a=null,c=p)):(a=null,c=p)}else a=null,c=p;if(a===null)if(p=c,b.substr(c,2)==="//"?(a="//",c+=2):(a=null,k===0&&i('"//"')),a!==null){g=[];/^[^\n]/.test(b.charAt(c))?(e=b.charAt(c),c++):(e=null,k===0&&i("[^\\n]"));for(;e!==null;)g.push(e),/^[^\n]/.test(b.charAt(c))?(e=b.charAt(c),c++):(e=null,k===0&&i("[^\\n]"));g!==null?(e=l(),e===null&&(e=q()),e!==null?a=[a,g,e]:(a=
null,c=p)):(a=null,c=p)}else a=null,c=p;k--;k===0&&a===null&&i("comment");m[d]={nextPos:c,result:a};return a}function s(){var d="semicolon@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,o;o=c;a=n();a=a!==null?a:"";a!==null?(b.charCodeAt(c)===59?(g=";",c+=1):(g=null,k===0&&i('";"')),g!==null?(e=n(),e=e!==null?e:"",e!==null?a=[a,g,e]:(a=null,c=o)):(a=null,c=o)):(a=null,c=o);m[d]={nextPos:c,result:a};return a}function u(){var d="comma@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,o;o=c;a=
n();a=a!==null?a:"";a!==null?(b.charCodeAt(c)===44?(g=",",c+=1):(g=null,k===0&&i('","')),g!==null?(e=n(),e=e!==null?e:"",e!==null?a=[a,g,e]:(a=null,c=o)):(a=null,c=o)):(a=null,c=o);m[d]={nextPos:c,result:a};return a}function I(){var d="left_bracket@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,o;o=c;a=n();a=a!==null?a:"";a!==null?(b.charCodeAt(c)===91?(g="[",c+=1):(g=null,k===0&&i('"["')),g!==null?(e=n(),e=e!==null?e:"",e!==null?a=[a,g,e]:(a=null,c=o)):(a=null,c=o)):(a=null,c=o);m[d]={nextPos:c,
result:a};return a}function J(){var d="right_bracket@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,o;o=c;a=n();a=a!==null?a:"";a!==null?(b.charCodeAt(c)===93?(g="]",c+=1):(g=null,k===0&&i('"]"')),g!==null?(e=n(),e=e!==null?e:"",e!==null?a=[a,g,e]:(a=null,c=o)):(a=null,c=o)):(a=null,c=o);m[d]={nextPos:c,result:a};return a}function K(){var d="equals@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,o;o=c;a=n();a=a!==null?a:"";a!==null?(b.charCodeAt(c)===61?(g="=",c+=1):(g=null,k===0&&i('"="')),
g!==null?(e=n(),e=e!==null?e:"",e!==null?a=[a,g,e]:(a=null,c=o)):(a=null,c=o)):(a=null,c=o);m[d]={nextPos:c,result:a};return a}function G(){var d="left_paren@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,o;o=c;a=n();a=a!==null?a:"";a!==null?(b.charCodeAt(c)===40?(g="(",c+=1):(g=null,k===0&&i('"("')),g!==null?(e=n(),e=e!==null?e:"",e!==null?a=[a,g,e]:(a=null,c=o)):(a=null,c=o)):(a=null,c=o);m[d]={nextPos:c,result:a};return a}function D(){var d="right_paren@"+c,a=m[d];if(a)return c=a.nextPos,
a.result;var g,e,o;o=c;a=n();a=a!==null?a:"";a!==null?(b.charCodeAt(c)===41?(g=")",c+=1):(g=null,k===0&&i('")"')),g!==null?(e=n(),e=e!==null?e:"",e!==null?a=[a,g,e]:(a=null,c=o)):(a=null,c=o)):(a=null,c=o);m[d]={nextPos:c,result:a};return a}function x(){var d="left_brace@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,o;o=c;a=n();a=a!==null?a:"";a!==null?(b.charCodeAt(c)===123?(g="{",c+=1):(g=null,k===0&&i('"{"')),g!==null?(e=n(),e=e!==null?e:"",e!==null?a=[a,g,e]:(a=null,c=o)):(a=null,c=o)):
(a=null,c=o);m[d]={nextPos:c,result:a};return a}function F(){var d="right_brace@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,o;o=c;a=n();a=a!==null?a:"";a!==null?(b.charCodeAt(c)===125?(g="}",c+=1):(g=null,k===0&&i('"}"')),g!==null?(e=n(),e=e!==null?e:"",e!==null?a=[a,g,e]:(a=null,c=o)):(a=null,c=o)):(a=null,c=o);m[d]={nextPos:c,result:a};return a}function B(){var b="external_statement_list@"+c,a=m[b];if(a)return c=a.nextPos,a.result;var g,e,a=c;g=[];for(e=sa();e!==null;)g.push(e),e=sa();if(g!==
null){e=new r({type:"root",statements:[]});for(var f=0;f<g.length;f++)if(g[f])e.statements=e.statements.concat(g[f]);g=e}g===null&&(c=a);m[b]={nextPos:c,result:g};return g}function sa(){var b="external_statement@"+c,a=m[b];if(a)return c=a.nextPos,a.result;var g;g=c;a=Xa();a===null&&(a=Wa());a===null&&(c=g);a===null&&(g=c,a=n(),a!==null&&(a=""),a===null&&(c=g));m[b]={nextPos:c,result:a};return a}function Wa(){var b="external_declaration@"+c,a=m[b];if(a)return c=a.nextPos,a.result;a=Ya();a===null&&
(a=Za(),a===null&&(a=ta(),a===null&&(a=$a())));m[b]={nextPos:c,result:a};return a}function ta(){var d="preprocessor_operator@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,o,p,h,j,w;j=h=c;b.charCodeAt(c)===35?(a="#",c+=1):(a=null,k===0&&i('"#"'));if(a!==null)if(b.substr(c,6)==="define"?(g="define",c+=6):(g=null,k===0&&i('"define"')),g===null&&(b.substr(c,5)==="undef"?(g="undef",c+=5):(g=null,k===0&&i('"undef"')),g===null&&(b.substr(c,6)==="pragma"?(g="pragma",c+=6):(g=null,k===0&&i('"pragma"')),
g===null&&(b.substr(c,7)==="version"?(g="version",c+=7):(g=null,k===0&&i('"version"')),g===null&&(b.substr(c,5)==="error"?(g="error",c+=5):(g=null,k===0&&i('"error"')),g===null&&(b.substr(c,9)==="extension"?(g="extension",c+=9):(g=null,k===0&&i('"extension"')),g===null&&(b.substr(c,4)==="line"?(g="line",c+=4):(g=null,k===0&&i('"line"')))))))),g!==null)if(e=n(),e!==null){w=c;o=[];/^[^\n]/.test(b.charAt(c))?(p=b.charAt(c),c++):(p=null,k===0&&i("[^\\n]"));for(;p!==null;)o.push(p),/^[^\n]/.test(b.charAt(c))?
(p=b.charAt(c),c++):(p=null,k===0&&i("[^\\n]"));o!==null&&(o=o.join(""));o===null&&(c=w);o!==null?(p=l(),p===null&&(p=q()),p!==null?a=[a,g,e,o,p]:(a=null,c=j)):(a=null,c=j)}else a=null,c=j;else a=null,c=j;else a=null,c=j;a!==null&&(a=new r({type:"preprocessor",directive:"#"+a[1],value:a[3]}));a===null&&(c=h);m[d]={nextPos:c,result:a};return a}function ua(){var d="preprocessor_if@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,o,p,h,j,w;j=h=c;b.charCodeAt(c)===35?(a="#",c+=1):(a=null,k===0&&i('"#"'));
if(a!==null)if(b.substr(c,5)==="ifdef"?(g="ifdef",c+=5):(g=null,k===0&&i('"ifdef"')),g===null&&(b.substr(c,6)==="ifndef"?(g="ifndef",c+=6):(g=null,k===0&&i('"ifndef"')),g===null&&(b.substr(c,2)==="if"?(g="if",c+=2):(g=null,k===0&&i('"if"')))),g!==null)if(e=n(),e!==null){w=c;o=[];/^[^\n]/.test(b.charAt(c))?(p=b.charAt(c),c++):(p=null,k===0&&i("[^\\n]"));for(;p!==null;)o.push(p),/^[^\n]/.test(b.charAt(c))?(p=b.charAt(c),c++):(p=null,k===0&&i("[^\\n]"));o!==null&&(o=o.join(""));o===null&&(c=w);o!==null?
(p=l(),p===null&&(p=q()),p!==null?a=[a,g,e,o,p]:(a=null,c=j)):(a=null,c=j)}else a=null,c=j;else a=null,c=j;else a=null,c=j;a!==null&&(a=new r({type:"preprocessor",directive:"#"+a[1],value:a[3]}));a===null&&(c=h);m[d]={nextPos:c,result:a};return a}function O(){var d="preprocessor_else_if@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,o,p,h,j;h=p=c;b.substr(c,5)==="#elif"?(a="#elif",c+=5):(a=null,k===0&&i('"#elif"'));if(a!==null)if(g=n(),g!==null){j=c;e=[];/^[^\n]/.test(b.charAt(c))?(o=b.charAt(c),
c++):(o=null,k===0&&i("[^\\n]"));for(;o!==null;)e.push(o),/^[^\n]/.test(b.charAt(c))?(o=b.charAt(c),c++):(o=null,k===0&&i("[^\\n]"));e!==null&&(e=e.join(""));e===null&&(c=j);e!==null?(o=l(),o===null&&(o=q()),o!==null?a=[a,g,e,o]:(a=null,c=h)):(a=null,c=h)}else a=null,c=h;else a=null,c=h;a!==null&&(a=new r({type:"preprocessor",directive:"#elif",value:a[2]}));a===null&&(c=p);m[d]={nextPos:c,result:a};return a}function va(){var d="preprocessor_else@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,
o,p;p=o=c;b.substr(c,5)==="#else"?(a="#else",c+=5):(a=null,k===0&&i('"#else"'));a!==null?(g=v(),g=g!==null?g:"",g!==null?(e=l(),e!==null?a=[a,g,e]:(a=null,c=p)):(a=null,c=p)):(a=null,c=p);a!==null&&(a=new r({type:"preprocessor",directive:"#else"}));a===null&&(c=o);m[d]={nextPos:c,result:a};return a}function xa(){var d="preprocessor_end@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,o,p;p=c;b.substr(c,6)==="#endif"?(a="#endif",c+=6):(a=null,k===0&&i('"#endif"'));a!==null?(g=v(),g=g!==null?g:"",
g!==null?(e=l(),e===null&&(e=q()),e!==null?(o=n(),o=o!==null?o:"",o!==null?a=[a,g,e,o]:(a=null,c=p)):(a=null,c=p)):(a=null,c=p)):(a=null,c=p);m[d]={nextPos:c,result:a};return a}function Xa(){var b="preprocessor_external_branch@"+c,a=m[b];if(a)return c=a.nextPos,a.result;var g,e,f,d,h,i;i=h=d=c;a=ua();a!==null?(g=B(),g!==null?a=[a,g]:(a=null,c=i)):(a=null,c=i);if(a!==null){g=[];i=c;e=O();e!==null?(f=B(),f!==null?e=[e,f]:(e=null,c=i)):(e=null,c=i);for(;e!==null;)g.push(e),i=c,e=O(),e!==null?(f=B(),
f!==null?e=[e,f]:(e=null,c=i)):(e=null,c=i);g!==null?(i=c,e=va(),e!==null?(f=B(),f!==null?e=[e,f]:(e=null,c=i)):(e=null,c=i),e=e!==null?e:"",e!==null?(f=xa(),f!==null?a=[a,g,e,f]:(a=null,c=h)):(a=null,c=h)):(a=null,c=h)}else a=null,c=h;a!==null&&(a=ab(a[0],a[1],a[2]));a===null&&(c=d);m[b]={nextPos:c,result:a};return a}function ya(){var b="preprocessor_statement_branch@"+c,a=m[b];if(a)return c=a.nextPos,a.result;var g,e,f,d,h,i;i=h=d=c;a=ua();a!==null?(g=M(),g!==null?a=[a,g]:(a=null,c=i)):(a=null,
c=i);if(a!==null){g=[];i=c;e=O();e!==null?(f=M(),f!==null?e=[e,f]:(e=null,c=i)):(e=null,c=i);for(;e!==null;)g.push(e),i=c,e=O(),e!==null?(f=M(),f!==null?e=[e,f]:(e=null,c=i)):(e=null,c=i);g!==null?(i=c,e=va(),e!==null?(f=M(),f!==null?e=[e,f]:(e=null,c=i)):(e=null,c=i),e=e!==null?e:"",e!==null?(f=xa(),f!==null?a=[a,g,e,f]:(a=null,c=h)):(a=null,c=h)):(a=null,c=h)}else a=null,c=h;a!==null&&(a=ab(a[0],a[1],a[2]));a===null&&(c=d);m[b]={nextPos:c,result:a};return a}function Ya(){var o;var b="function_definition@"+
c,a=m[b];if(a)return c=a.nextPos,a.result;var g,e,f;f=e=c;a=za();a!==null?(g=$(),g!==null?a=[a,g]:(a=null,c=f)):(a=null,c=f);a!==null&&(g=a[0],o=z=new r({type:"function_declaration",name:g.name,returnType:g.returnType,parameters:g.parameters,body:a[1]}),a=o);a===null&&(c=e);m[b]={nextPos:c,result:a};return a}function $(){var b="compound_statement@"+c,a=m[b];if(a)return c=a.nextPos,a.result;var g,e,f,d;d=a=c;g=x();g!==null?(e=M(),e=e!==null?e:"",e!==null?(f=F(),f!==null?g=[g,e,f]:(g=null,c=d)):(g=
null,c=d)):(g=null,c=d);if(g!==null){g=g[1];z=new r({type:"scope",statements:[]});if(g&&g.statements)z.statements=g.statements;g=z}g===null&&(c=a);m[b]={nextPos:c,result:g};return g}function M(){var b="statement_list@"+c,a=m[b];if(a)return c=a.nextPos,a.result;var g,e,f,d;d=f=c;a=n();a=a!==null?a:"";if(a!==null){g=[];for(e=Q();e!==null;)g.push(e),e=Q();g!==null?(e=n(),e=e!==null?e:"",e!==null?a=[a,g,e]:(a=null,c=d)):(a=null,c=d)}else a=null,c=d;a!==null&&(a={statements:a[1]});a===null&&(c=f);m[b]=
{nextPos:c,result:a};return a}function Q(){var b="statement_no_new_scope@"+c,a=m[b];if(a)return c=a.nextPos,a.result;a=$();a===null&&(a=Aa(),a===null&&(a=ya()));m[b]={nextPos:c,result:a};return a}function aa(){var b="statement_with_scope@"+c,a=m[b];if(a)return c=a.nextPos,a.result;a=$();a===null&&(a=Aa(),a===null&&(a=ya()));m[b]={nextPos:c,result:a};return a}function Aa(){var b="simple_statement@"+c,a=m[b];if(a)return c=a.nextPos,a.result;var g;g=c;a=ba();a===null&&(a=Ba(),a===null&&(a=bb(),a===null&&
(a=cb(),a===null&&(a=db(),a===null&&(a=ta())))));a===null&&(c=g);m[b]={nextPos:c,result:a};return a}function bb(){var d="selection_statement@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,o,p,h,j,w,t,l,q;l=t=c;b.substr(c,2)==="if"?(a="if",c+=2):(a=null,k===0&&i('"if"'));a!==null?(g=G(),g!==null?(e=E(),e!==null?(o=D(),o!==null?(p=aa(),p!==null?(q=c,b.substr(c,4)==="else"?(h="else",c+=4):(h=null,k===0&&i('"else"')),h!==null?(j=n(),j=j!==null?j:"",j!==null?(w=aa(),w!==null?h=[h,j,w]:(h=null,c=q)):
(h=null,c=q)):(h=null,c=q),h=h!==null?h:"",h!==null?a=[a,g,e,o,p,h]:(a=null,c=l)):(a=null,c=l)):(a=null,c=l)):(a=null,c=l)):(a=null,c=l)):(a=null,c=l);if(a!==null){g=a[5];z=new r({type:"if_statement",condition:a[2],body:a[4]});if(g)z.elseBody=g[2];a=z}a===null&&(c=t);m[d]={nextPos:c,result:a};return a}function eb(){var d="for_loop@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,o,p,h,j,n,t,l;l=t=c;b.substr(c,3)==="for"?(a="for",c+=3):(a=null,k===0&&i('"for"'));a!==null?(g=G(),g!==null?(e=Ba(),
e===null&&(e=ba()),e!==null?(o=Ca(),o=o!==null?o:"",o!==null?(p=s(),p!==null?(h=E(),h=h!==null?h:"",h!==null?(j=D(),j!==null?(n=Q(),n!==null?a=[a,g,e,o,p,h,j,n]:(a=null,c=l)):(a=null,c=l)):(a=null,c=l)):(a=null,c=l)):(a=null,c=l)):(a=null,c=l)):(a=null,c=l)):(a=null,c=l);a!==null&&(a=new r({type:"for_statement",initializer:a[2],condition:a[3],increment:a[5],body:a[7]}));a===null&&(c=t);m[d]={nextPos:c,result:a};return a}function Da(){var d="while_statement@"+c,a=m[d];if(a)return c=a.nextPos,a.result;
var g,e,o,p,h;h=p=c;b.substr(c,5)==="while"?(a="while",c+=5):(a=null,k===0&&i('"while"'));a!==null?(g=G(),g!==null?(e=Ca(),e!==null?(o=D(),o!==null?a=[a,g,e,o]:(a=null,c=h)):(a=null,c=h)):(a=null,c=h)):(a=null,c=h);a!==null&&(a={condition:a[2]});a===null&&(c=p);m[d]={nextPos:c,result:a};return a}function fb(){var b="while_loop@"+c,a=m[b];if(a)return c=a.nextPos,a.result;var g,e,f;f=e=c;a=Da();a!==null?(g=Q(),g!==null?a=[a,g]:(a=null,c=f)):(a=null,c=f);a!==null&&(a=new r({type:"while_statement",condition:a[0].condition,
body:a[1]}));a===null&&(c=e);m[b]={nextPos:c,result:a};return a}function gb(){var d="do_while@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,o,h;h=o=c;b.substr(c,2)==="do"?(a="do",c+=2):(a=null,k===0&&i('"do"'));a!==null?(g=aa(),g!==null?(e=Da(),e!==null?a=[a,g,e]:(a=null,c=h)):(a=null,c=h)):(a=null,c=h);a!==null&&(a=new r({type:"do_statement",condition:a[2].condition,body:a[1]}));a===null&&(c=o);m[d]={nextPos:c,result:a};return a}function cb(){var b="iteration_statement@"+c,a=m[b];if(a)return c=
a.nextPos,a.result;a=fb();a===null&&(a=gb(),a===null&&(a=eb()));m[b]={nextPos:c,result:a};return a}function db(){var d="jump_statement@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,o,h,j;h=o=c;b.substr(c,6)==="return"?(a="return",c+=6):(a=null,k===0&&i('"return"'));a!==null?(g=E(),g!==null?(e=s(),e!==null?a=[a,g,e]:(a=null,c=h)):(a=null,c=h)):(a=null,c=h);a!==null&&(a=new r({type:"return",value:a[1]}));a===null&&(c=o);a===null&&(h=o=c,b.substr(c,8)==="continue"?(a="continue",c+=8):(a=null,k===
0&&i('"continue"')),a!==null?(g=s(),g!==null?a=[a,g]:(a=null,c=h)):(a=null,c=h),a===null&&(h=c,b.substr(c,5)==="break"?(a="break",c+=5):(a=null,k===0&&i('"break"')),a!==null?(g=s(),g!==null?a=[a,g]:(a=null,c=h)):(a=null,c=h),a===null&&(h=c,b.substr(c,6)==="return"?(a="return",c+=6):(a=null,k===0&&i('"return"')),a!==null?(g=s(),g!==null?a=[a,g]:(a=null,c=h)):(a=null,c=h),a===null&&(j=e=h=c,a=R=="fs"?"":null,a!==null?(b.substr(c,7)==="discard"?(g="discard",c+=7):(g=null,k===0&&i('"discard"')),g!==null?
a=[a,g]:(a=null,c=j)):(a=null,c=j),a!==null&&(a="discard"),a===null&&(c=e),a!==null?(g=s(),g!==null?a=[a,g]:(a=null,c=h)):(a=null,c=h)))),a!==null&&(a=new r({type:a[0]})),a===null&&(c=o));m[d]={nextPos:c,result:a};return a}function Ba(){var b="expression_statement@"+c,a=m[b];if(a)return c=a.nextPos,a.result;var g,e,f;f=e=c;a=E();a=a!==null?a:"";a!==null?(g=s(),g!==null?a=[a,g]:(a=null,c=f)):(a=null,c=f);a!==null&&(a=new r({type:"expression",expression:a[0]}));a===null&&(c=e);m[b]={nextPos:c,result:a};
return a}function ba(){var d="declaration@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,o,h,j,L,w,t,l;k++;t=w=c;a=za();a!==null?(g=s(),g!==null?a=[a,g]:(a=null,c=t)):(a=null,c=t);a!==null&&(a=a[0]);a===null&&(c=w);if(a===null&&(t=w=c,a=S(),a!==null?(g=n(),g!==null?(e=Ea(),e!==null?(o=s(),o!==null?a=[a,g,e,o]:(a=null,c=t)):(a=null,c=t)):(a=null,c=t)):(a=null,c=t),a!==null&&(a=new r({type:"declarator",typeAttribute:a[0],declarators:a[2]})),a===null&&(c=w),a===null)){t=w=c;a=R=="vs"?"":null;if(a!==
null)if(b.substr(c,9)==="invariant"?(g="invariant",c+=9):(g=null,k===0&&i('"invariant"')),g!==null)if(e=n(),e!==null)if(o=C(),o!==null){h=[];l=c;j=u();j!==null?(L=C(),L!==null?j=[j,L]:(j=null,c=l)):(j=null,c=l);for(;j!==null;)h.push(j),l=c,j=u(),j!==null?(L=C(),L!==null?j=[j,L]:(j=null,c=l)):(j=null,c=l);h!==null?(j=s(),j!==null?a=[a,g,e,o,h,j]:(a=null,c=t)):(a=null,c=t)}else a=null,c=t;else a=null,c=t;else a=null,c=t;else a=null,c=t;a!==null&&(a=function(a,b){var c=[a].concat(b.map(function(a){return a[1]}));
return new r({type:"invariant",identifiers:c})}(a[3],a[4]));a===null&&(c=w);a===null&&(t=w=c,b.substr(c,9)==="precision"?(a="precision",c+=9):(a=null,k===0&&i('"precision"')),a!==null?(g=n(),g!==null?(e=ca(),e!==null?(o=n(),o!==null?(h=T(),h!==null?(j=s(),j!==null?a=[a,g,e,o,h,j]:(a=null,c=t)):(a=null,c=t)):(a=null,c=t)):(a=null,c=t)):(a=null,c=t)):(a=null,c=t),a!==null&&(a=new r({type:"precision",precision:a[2],typeName:a[4]})),a===null&&(c=w))}k--;k===0&&a===null&&i("declaration");m[d]={nextPos:c,
result:a};return a}function Za(){var b="global_declaration@"+c,a=m[b];if(a)return c=a.nextPos,a.result;var g,e,f,d,h,a=ba();a===null&&(h=d=c,a=hb(),a!==null?(g=n(),g!==null?(e=Ea(),e!==null?(f=s(),f!==null?a=[a,g,e,f]:(a=null,c=h)):(a=null,c=h)):(a=null,c=h)):(a=null,c=h),a!==null&&(a=new r({type:"declarator",typeAttribute:a[0],declarators:a[2]})),a===null&&(c=d),a===null&&(h=d=c,a=ib(),a!==null?(g=n(),g!==null?(e=jb(),e!==null?(f=s(),f!==null?a=[a,g,e,f]:(a=null,c=h)):(a=null,c=h)):(a=null,c=h)):
(a=null,c=h),a!==null&&(a=new r({type:"declarator",typeAttribute:a[0],declarators:a[2]})),a===null&&(c=d)));m[b]={nextPos:c,result:a};return a}function kb(){var d="function_prototype_parameter_list@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,h,p,j,n;b.substr(c,4)==="void"?(a="void",c+=4):(a=null,k===0&&i('"void"'));if(a===null){j=p=c;a=da();if(a!==null){g=[];n=c;e=u();e!==null?(h=da(),h!==null?e=[e,h]:(e=null,c=n)):(e=null,c=n);for(;e!==null;)g.push(e),n=c,e=u(),e!==null?(h=da(),h!==null?
e=[e,h]:(e=null,c=n)):(e=null,c=n);g!==null?a=[a,g]:(a=null,c=j)}else a=null,c=j;a!==null&&(a=function(a,b){return[a].concat(b.map(function(a){return a[1]}))}(a[0],a[1]));a===null&&(c=p)}m[d]={nextPos:c,result:a};return a}function za(){var b="function_prototype@"+c,a=m[b];if(a)return c=a.nextPos,a.result;var g,e,f,d,h,i,j;j=i=c;a=lb();a===null&&(a=U());a!==null?(g=n(),g!==null?(e=C(),e!==null?(f=G(),f!==null?(d=kb(),d=d!==null?d:"",d!==null?(h=D(),h!==null?a=[a,g,e,f,d,h]:(a=null,c=j)):(a=null,c=
j)):(a=null,c=j)):(a=null,c=j)):(a=null,c=j)):(a=null,c=j);if(a!==null){g=a[4];z=new r({type:"function_prototype",name:a[2].name,returnType:a[0],parameters:g});if(g=="void"||!g)z.parameters=[];a=z}a===null&&(c=i);m[b]={nextPos:c,result:a};return a}function mb(){var d="parameter_qualifier@"+c,a=m[d];if(a)return c=a.nextPos,a.result;b.substr(c,5)==="inout"?(a="inout",c+=5):(a=null,k===0&&i('"inout"'));a===null&&(b.substr(c,2)==="in"?(a="in",c+=2):(a=null,k===0&&i('"in"')),a===null&&(b.substr(c,3)===
"out"?(a="out",c+=3):(a=null,k===0&&i('"out"'))));m[d]={nextPos:c,result:a};return a}function da(){var b="parameter_declaration@"+c,a=m[b];if(a)return c=a.nextPos,a.result;var g,e,f,d,h,i,j,k,l,q,s;s=q=a=c;g=ea();g!==null?(e=n(),e!==null?g=[g,e]:(g=null,c=s)):(g=null,c=s);g=g!==null?g:"";g!==null?(s=c,e=mb(),e!==null?(f=n(),f!==null?e=[e,f]:(e=null,c=s)):(e=null,c=s),e=e!==null?e:"",e!==null?(s=c,f=ca(),f!==null?(d=n(),d!==null?f=[f,d]:(f=null,c=s)):(f=null,c=s),f=f!==null?f:"",f!==null?(d=T(),d!==
null?(h=n(),h!==null?(i=C(),i!==null?(s=c,j=I(),j!==null?(k=N(),k!==null?(l=J(),l!==null?j=[j,k,l]:(j=null,c=s)):(j=null,c=s)):(j=null,c=s),j=j!==null?j:"",j!==null?g=[g,e,f,d,h,i,j]:(g=null,c=q)):(g=null,c=q)):(g=null,c=q)):(g=null,c=q)):(g=null,c=q)):(g=null,c=q)):(g=null,c=q);if(g!==null){e=g[0];f=g[1];d=g[2];h=g[6];g=new r({type:"parameter",type_name:g[3],name:g[5].name});if(e)g.typeQualifier=e[0];if(f)g.parameterQualifier=f[0];if(d)g.precision=d[0];if(h)g.arraySize=h[1];g=g.typeQualifier&&g.parameterQualifier&&
g.parameterQualifier!="in"?null:g}g===null&&(c=a);m[b]={nextPos:c,result:g};return g}function Ea(){var b="init_declarator_list@"+c,a=m[b];if(a)return c=a.nextPos,a.result;var g,e,f,d,h,i;h=d=c;a=fa();if(a!==null){g=[];i=c;e=u();e!==null?(f=fa(),f!==null?e=[e,f]:(e=null,c=i)):(e=null,c=i);for(;e!==null;)g.push(e),i=c,e=u(),e!==null?(f=fa(),f!==null?e=[e,f]:(e=null,c=i)):(e=null,c=i);g!==null?a=[a,g]:(a=null,c=h)}else a=null,c=h;a!==null&&(a=function(a,b){return[a].concat(b.map(function(a){return a[1]}))}(a[0],
a[1]));a===null&&(c=d);m[b]={nextPos:c,result:a};return a}function nb(){var b="declarator_list@"+c,a=m[b];if(a)return c=a.nextPos,a.result;var g,e,f,d,h,i;h=d=c;a=V();if(a!==null){g=[];i=c;e=u();e!==null?(f=V(),f!==null?e=[e,f]:(e=null,c=i)):(e=null,c=i);for(;e!==null;)g.push(e),i=c,e=u(),e!==null?(f=V(),f!==null?e=[e,f]:(e=null,c=i)):(e=null,c=i);g!==null?a=[a,g]:(a=null,c=h)}else a=null,c=h;a!==null&&(a=function(a,b){return[a].concat(b.map(function(a){return a[1]}))}(a[0],a[1]));a===null&&(c=d);
m[b]={nextPos:c,result:a};return a}function jb(){var b="declarator_list_no_array@"+c,a=m[b];if(a)return c=a.nextPos,a.result;var g,e,f,d,h,i;h=d=c;a=W();if(a!==null){g=[];i=c;e=u();e!==null?(f=W(),f!==null?e=[e,f]:(e=null,c=i)):(e=null,c=i);for(;e!==null;)g.push(e),i=c,e=u(),e!==null?(f=W(),f!==null?e=[e,f]:(e=null,c=i)):(e=null,c=i);g!==null?a=[a,g]:(a=null,c=h)}else a=null,c=h;a!==null&&(a=function(a,b){return[a].concat(b.map(function(a){return a[1]}))}(a[0],a[1]));a===null&&(c=d);m[b]={nextPos:c,
result:a};return a}function Fa(){var b="declarator_list_arrays_have_size@"+c,a=m[b];if(a)return c=a.nextPos,a.result;var g,e,f,d,h,i;h=d=c;a=X();if(a!==null){g=[];i=c;e=u();e!==null?(f=X(),f!==null?e=[e,f]:(e=null,c=i)):(e=null,c=i);for(;e!==null;)g.push(e),i=c,e=u(),e!==null?(f=X(),f!==null?e=[e,f]:(e=null,c=i)):(e=null,c=i);g!==null?a=[a,g]:(a=null,c=h)}else a=null,c=h;a!==null&&(a=function(a,b){return[a].concat(b.map(function(a){return a[1]}))}(a[0],a[1]));a===null&&(c=d);m[b]={nextPos:c,result:a};
return a}function W(){var b="declarator_no_array@"+c,a=m[b];if(a)return c=a.nextPos,a.result;var g;g=c;a=C();a!==null&&(a=new r({type:"declarator_item",name:a}));a===null&&(c=g);m[b]={nextPos:c,result:a};return a}function X(){var b="declarator_array_with_size@"+c,a=m[b];if(a)return c=a.nextPos,a.result;var g,e,f,d,h;h=d=c;a=C();a!==null?(g=I(),g!==null?(e=N(),e!==null?(f=J(),f!==null?a=[a,g,e,f]:(a=null,c=h)):(a=null,c=h)):(a=null,c=h)):(a=null,c=h);a!==null&&(a=new r({type:"declarator_item",name:a[0],
arraySize:a[2],isArray:true}));a===null&&(c=d);a===null&&(a=W());m[b]={nextPos:c,result:a};return a}function V(){var b="declarator@"+c,a=m[b];if(a)return c=a.nextPos,a.result;var g,e,f,d;d=f=c;a=C();a!==null?(g=I(),g!==null?(e=J(),e!==null?a=[a,g,e]:(a=null,c=d)):(a=null,c=d)):(a=null,c=d);a!==null&&(a=new r({type:"declarator_item",name:a[0],isArray:true}));a===null&&(c=f);a===null&&(a=X());m[b]={nextPos:c,result:a};return a}function fa(){var b="init_declarator@"+c,a=m[b];if(a)return c=a.nextPos,
a.result;var g,e,f,d;d=f=c;a=C();a!==null?(g=K(),g!==null?(e=N(),e!==null?a=[a,g,e]:(a=null,c=d)):(a=null,c=d)):(a=null,c=d);a!==null&&(a=new r({type:"declarator_item",name:a[0],initializer:a[2]}));a===null&&(c=f);a===null&&(a=V());m[b]={nextPos:c,result:a};return a}function ob(){var b="member_list@"+c,a=m[b];if(a)return c=a.nextPos,a.result;var g,e,f,d,h,i;i=h=c;g=S();g!==null?(e=n(),e!==null?(f=Fa(),f!==null?(d=s(),d!==null?g=[g,e,f,d]:(g=null,c=i)):(g=null,c=i)):(g=null,c=i)):(g=null,c=i);if(g!==
null)for(a=[];g!==null;)a.push(g),i=c,g=S(),g!==null?(e=n(),e!==null?(f=Fa(),f!==null?(d=s(),d!==null?g=[g,e,f,d]:(g=null,c=i)):(g=null,c=i)):(g=null,c=i)):(g=null,c=i);else a=null;a!==null&&(a=function(a){return a.map(function(a){return new r({type:"declarator",typeAttribute:a[0],declarators:a[2]})})}(a));a===null&&(c=h);m[b]={nextPos:c,result:a};return a}function $a(){var d="struct_definition@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,h,p,j,l,w,t,q;j=q=a=c;g=Ga();g===null&&(g=Ha());g!==
null?(e=n(),e!==null?g=[g,e]:(g=null,c=j)):(g=null,c=j);g=g!==null?g:"";g!==null?(b.substr(c,6)==="struct"?(e="struct",c+=6):(e=null,k===0&&i('"struct"')),e!==null?(j=c,h=n(),h!==null?(p=C(),p!==null?h=[h,p]:(h=null,c=j)):(h=null,c=j),h=h!==null?h:"",h!==null?(p=x(),p!==null?(j=ob(),j!==null?(l=F(),l!==null?(w=nb(),w=w!==null?w:"",w!==null?(t=s(),t!==null?g=[g,e,h,p,j,l,w,t]:(g=null,c=q)):(g=null,c=q)):(g=null,c=q)):(g=null,c=q)):(g=null,c=q)):(g=null,c=q)):(g=null,c=q)):(g=null,c=q);if(g!==null){e=
g[0];h=g[2];p=g[6];g=new r({type:"struct_definition",members:g[4]});if(e)g.qualifier=e[0];if(h)g.name=h[1].name,pb[g.name]=g;if(p)g.declarators=p}g===null&&(c=a);m[d]={nextPos:c,result:g};return g}function U(){var b="precision_type@"+c,a=m[b];if(a)return c=a.nextPos,a.result;var g,e,f,d;d=f=a=c;g=ca();g!==null?(e=n(),e!==null?g=[g,e]:(g=null,c=d)):(g=null,c=d);g=g!==null?g:"";g!==null?(e=T(),e!==null?g=[g,e]:(g=null,c=f)):(g=null,c=f);if(g!==null&&(e=g[0],g=new r({type:"type",name:g[1]}),e))g.precision=
e[0];g===null&&(c=a);m[b]={nextPos:c,result:g};return g}function S(){var b="locally_specified_type@"+c,a=m[b];if(a)return c=a.nextPos,a.result;var g,e,f,d;k++;d=f=a=c;g=ea();g!==null?(e=n(),e!==null?g=[g,e]:(g=null,c=d)):(g=null,c=d);g=g!==null?g:"";g!==null?(e=U(),e!==null?g=[g,e]:(g=null,c=f)):(g=null,c=f);if(g!==null&&(e=g[0],g=g[1],e))g.qualifier=e[0];g===null&&(c=a);k--;k===0&&g===null&&i("locally specified type");m[b]={nextPos:c,result:g};return g}function Ha(){var d="attribute_qualifier@"+
c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,h;h=e=c;a=R=="vs"?"":null;a!==null?(b.substr(c,9)==="attribute"?(g="attribute",c+=9):(g=null,k===0&&i('"attribute"')),g!==null?a=[a,g]:(a=null,c=h)):(a=null,c=h);a!==null&&(a="attribute");a===null&&(c=e);m[d]={nextPos:c,result:a};return a}function ib(){var b="attribute_type@"+c,a=m[b];if(a)return c=a.nextPos,a.result;var g,e,f,d;k++;d=f=c;a=Ha();a!==null?(g=n(),g!==null?(e=U(),e!==null?a=[a,g,e]:(a=null,c=d)):(a=null,c=d)):(a=null,c=d);if(a!==null)g=
a[2],g.qualifier=a[0],a=g;a===null&&(c=f);k--;k===0&&a===null&&i("locally specified type");m[b]={nextPos:c,result:a};return a}function hb(){var b="fully_specified_type@"+c,a=m[b];if(a)return c=a.nextPos,a.result;var g,e,f,d;k++;d=f=a=c;g=Ga();g!==null?(e=n(),e!==null?g=[g,e]:(g=null,c=d)):(g=null,c=d);g=g!==null?g:"";g!==null?(e=U(),e!==null?g=[g,e]:(g=null,c=f)):(g=null,c=f);if(g!==null&&(e=g[0],g=g[1],e))g.qualifier=e[0];g===null&&(c=a);k--;k===0&&g===null&&i("fully specified type");m[b]={nextPos:c,
result:g};return g}function ca(){var d="precision_qualifier@"+c,a=m[d];if(a)return c=a.nextPos,a.result;k++;b.substr(c,5)==="highp"?(a="highp",c+=5):(a=null,k===0&&i('"highp"'));a===null&&(b.substr(c,7)==="mediump"?(a="mediump",c+=7):(a=null,k===0&&i('"mediump"')),a===null&&(b.substr(c,4)==="lowp"?(a="lowp",c+=4):(a=null,k===0&&i('"lowp"'))));k--;k===0&&a===null&&i("precision qualifier");m[d]={nextPos:c,result:a};return a}function ea(){var d="const_qualifier@"+c,a=m[d];if(a)return c=a.nextPos,a.result;
b.substr(c,5)==="const"?(a="const",c+=5):(a=null,k===0&&i('"const"'));m[d]={nextPos:c,result:a};return a}function Ga(){var d="type_qualifier@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,h,p;k++;a=ea();a===null&&(b.substr(c,7)==="varying"?(a="varying",c+=7):(a=null,k===0&&i('"varying"')),a===null&&(p=h=c,b.substr(c,9)==="invariant"?(a="invariant",c+=9):(a=null,k===0&&i('"invariant"')),a!==null?(g=n(),g!==null?(b.substr(c,7)==="varying"?(e="varying",c+=7):(e=null,k===0&&i('"varying"')),e!==null?
a=[a,g,e]:(a=null,c=p)):(a=null,c=p)):(a=null,c=p),a!==null&&(a="invariant varying"),a===null&&(c=h),a===null&&(b.substr(c,7)==="uniform"?(a="uniform",c+=7):(a=null,k===0&&i('"uniform"')))));k--;k===0&&a===null&&i("type qualifier");m[d]={nextPos:c,result:a};return a}function lb(){var d="void_type@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g;k++;g=c;b.substr(c,4)==="void"?(a="void",c+=4):(a=null,k===0&&i('"void"'));a!==null&&(a=new r({type:"type",name:"void"}));a===null&&(c=g);k--;k===0&&a===
null&&i("void");m[d]={nextPos:c,result:a};return a}function T(){var d="type_name@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g;k++;b.substr(c,5)==="float"?(a="float",c+=5):(a=null,k===0&&i('"float"'));a===null&&(b.substr(c,3)==="int"?(a="int",c+=3):(a=null,k===0&&i('"int"')),a===null&&(b.substr(c,4)==="bool"?(a="bool",c+=4):(a=null,k===0&&i('"bool"')),a===null&&(b.substr(c,9)==="sampler2D"?(a="sampler2D",c+=9):(a=null,k===0&&i('"sampler2D"')),a===null&&(b.substr(c,11)==="samplerCube"?(a="samplerCube",
c+=11):(a=null,k===0&&i('"samplerCube"')),a===null&&(a=Ia(),a===null&&(a=Ja(),a===null&&(g=c,a=C(),a!==null&&(a=a.name in pb?a.name:null),a===null&&(c=g))))))));k--;k===0&&a===null&&i("type name");m[d]={nextPos:c,result:a};return a}function C(){var d="identifier@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,h,p,j;k++;e=j=p=c;k++;h=c;a=qb();a!==null?(/^[^A-Za-z_0-9]/.test(b.charAt(c))?(g=b.charAt(c),c++):(g=null,k===0&&i("[^A-Za-z_0-9]")),g!==null?a=[a,g]:(a=null,c=h)):(a=null,c=h);k--;a===null?
a="":(a=null,c=e);if(a!==null)if(/^[A-Za-z_]/.test(b.charAt(c))?(g=b.charAt(c),c++):(g=null,k===0&&i("[A-Za-z_]")),g!==null){e=[];/^[A-Za-z_0-9]/.test(b.charAt(c))?(h=b.charAt(c),c++):(h=null,k===0&&i("[A-Za-z_0-9]"));for(;h!==null;)e.push(h),/^[A-Za-z_0-9]/.test(b.charAt(c))?(h=b.charAt(c),c++):(h=null,k===0&&i("[A-Za-z_0-9]"));e!==null?a=[a,g,e]:(a=null,c=j)}else a=null,c=j;else a=null,c=j;a!==null&&(a=new r({type:"identifier",name:a[1]+a[2].join("")}));a===null&&(c=p);k--;k===0&&a===null&&i("identifier");
m[d]={nextPos:c,result:a};return a}function qb(){var d="keyword@"+c,a=m[d];if(a)return c=a.nextPos,a.result;k++;b.substr(c,9)==="attribute"?(a="attribute",c+=9):(a=null,k===0&&i('"attribute"'));a===null&&(b.substr(c,5)==="const"?(a="const",c+=5):(a=null,k===0&&i('"const"')),a===null&&(b.substr(c,4)==="bool"?(a="bool",c+=4):(a=null,k===0&&i('"bool"')),a===null&&(b.substr(c,5)==="float"?(a="float",c+=5):(a=null,k===0&&i('"float"')),a===null&&(b.substr(c,3)==="int"?(a="int",c+=3):(a=null,k===0&&i('"int"')),
a===null&&(b.substr(c,5)==="break"?(a="break",c+=5):(a=null,k===0&&i('"break"')),a===null&&(b.substr(c,8)==="continue"?(a="continue",c+=8):(a=null,k===0&&i('"continue"')),a===null&&(b.substr(c,2)==="do"?(a="do",c+=2):(a=null,k===0&&i('"do"')),a===null&&(b.substr(c,4)==="else"?(a="else",c+=4):(a=null,k===0&&i('"else"')),a===null&&(b.substr(c,3)==="for"?(a="for",c+=3):(a=null,k===0&&i('"for"')),a===null&&(b.substr(c,2)==="if"?(a="if",c+=2):(a=null,k===0&&i('"if"')),a===null&&(b.substr(c,7)==="discard"?
(a="discard",c+=7):(a=null,k===0&&i('"discard"')),a===null&&(b.substr(c,6)==="return"?(a="return",c+=6):(a=null,k===0&&i('"return"')),a===null&&(a=Ia(),a===null&&(a=Ja(),a===null&&(b.substr(c,2)==="in"?(a="in",c+=2):(a=null,k===0&&i('"in"')),a===null&&(b.substr(c,3)==="out"?(a="out",c+=3):(a=null,k===0&&i('"out"')),a===null&&(b.substr(c,5)==="inout"?(a="inout",c+=5):(a=null,k===0&&i('"inout"')),a===null&&(b.substr(c,7)==="uniform"?(a="uniform",c+=7):(a=null,k===0&&i('"uniform"')),a===null&&(b.substr(c,
7)==="varying"?(a="varying",c+=7):(a=null,k===0&&i('"varying"')),a===null&&(b.substr(c,9)==="sampler2D"?(a="sampler2D",c+=9):(a=null,k===0&&i('"sampler2D"')),a===null&&(b.substr(c,11)==="samplerCube"?(a="samplerCube",c+=11):(a=null,k===0&&i('"samplerCube"')),a===null&&(b.substr(c,6)==="struct"?(a="struct",c+=6):(a=null,k===0&&i('"struct"')),a===null&&(b.substr(c,4)==="void"?(a="void",c+=4):(a=null,k===0&&i('"void"')),a===null&&(b.substr(c,5)==="while"?(a="while",c+=5):(a=null,k===0&&i('"while"')),
a===null&&(b.substr(c,5)==="highp"?(a="highp",c+=5):(a=null,k===0&&i('"highp"')),a===null&&(b.substr(c,7)==="mediump"?(a="mediump",c+=7):(a=null,k===0&&i('"mediump"')),a===null&&(b.substr(c,4)==="lowp"?(a="lowp",c+=4):(a=null,k===0&&i('"lowp"')),a===null&&(b.substr(c,4)==="true"?(a="true",c+=4):(a=null,k===0&&i('"true"')),a===null&&(b.substr(c,5)==="false"?(a="false",c+=5):(a=null,k===0&&i('"false"')))))))))))))))))))))))))))))));k--;k===0&&a===null&&i("keyword");m[d]={nextPos:c,result:a};return a}
function Ia(){var d="vector@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,h,p;p=h=c;/^[bi]/.test(b.charAt(c))?(a=b.charAt(c),c++):(a=null,k===0&&i("[bi]"));a=a!==null?a:"";a!==null?(b.substr(c,3)==="vec"?(g="vec",c+=3):(g=null,k===0&&i('"vec"')),g!==null?(/^[234]/.test(b.charAt(c))?(e=b.charAt(c),c++):(e=null,k===0&&i("[234]")),e!==null?a=[a,g,e]:(a=null,c=p)):(a=null,c=p)):(a=null,c=p);a!==null&&(a=a.join(""));a===null&&(c=h);m[d]={nextPos:c,result:a};return a}function Ja(){var d="matrix@"+
c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,h;h=e=c;b.substr(c,3)==="mat"?(a="mat",c+=3):(a=null,k===0&&i('"mat"'));a!==null?(/^[234]/.test(b.charAt(c))?(g=b.charAt(c),c++):(g=null,k===0&&i("[234]")),g!==null?a=[a,g]:(a=null,c=h)):(a=null,c=h);a!==null&&(a=a.join(""));a===null&&(c=e);m[d]={nextPos:c,result:a};return a}function Ka(){var d="single_underscore_identifier@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,h,p;p=c;a=[];/^[A-Za-z0-9]/.test(b.charAt(c))?(g=b.charAt(c),c++):(g=null,
k===0&&i("[A-Za-z0-9]"));for(;g!==null;)a.push(g),/^[A-Za-z0-9]/.test(b.charAt(c))?(g=b.charAt(c),c++):(g=null,k===0&&i("[A-Za-z0-9]"));if(a!==null)if(b.charCodeAt(c)===95?(g="_",c+=1):(g=null,k===0&&i('"_"')),g!==null){/^[A-Za-z0-9]/.test(b.charAt(c))?(h=b.charAt(c),c++):(h=null,k===0&&i("[A-Za-z0-9]"));if(h!==null)for(e=[];h!==null;)e.push(h),/^[A-Za-z0-9]/.test(b.charAt(c))?(h=b.charAt(c),c++):(h=null,k===0&&i("[A-Za-z0-9]"));else e=null;e!==null?a=[a,g,e]:(a=null,c=p)}else a=null,c=p;else a=null,
c=p;m[d]={nextPos:c,result:a};return a}function rb(){var d="int_constant@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,h,p,j;j=p=c;/^[1-9]/.test(b.charAt(c))?(a=b.charAt(c),c++):(a=null,k===0&&i("[1-9]"));if(a!==null){g=[];/^[0-9]/.test(b.charAt(c))?(e=b.charAt(c),c++):(e=null,k===0&&i("[0-9]"));for(;e!==null;)g.push(e),/^[0-9]/.test(b.charAt(c))?(e=b.charAt(c),c++):(e=null,k===0&&i("[0-9]"));g!==null?a=[a,g]:(a=null,c=j)}else a=null,c=j;a!==null&&(a=new r({type:"int",value:parseInt([a[0]].concat(a[1]).join(""),
10)}));a===null&&(c=p);if(a===null){j=p=c;b.charCodeAt(c)===48?(a="0",c+=1):(a=null,k===0&&i('"0"'));if(a!==null)if(/^[Xx]/.test(b.charAt(c))?(g=b.charAt(c),c++):(g=null,k===0&&i("[Xx]")),g!==null){/^[0-9A-Fa-f]/.test(b.charAt(c))?(h=b.charAt(c),c++):(h=null,k===0&&i("[0-9A-Fa-f]"));if(h!==null)for(e=[];h!==null;)e.push(h),/^[0-9A-Fa-f]/.test(b.charAt(c))?(h=b.charAt(c),c++):(h=null,k===0&&i("[0-9A-Fa-f]"));else e=null;e!==null?a=[a,g,e]:(a=null,c=j)}else a=null,c=j;else a=null,c=j;a!==null&&(a=new r({type:"int",
value:parseInt(a[2].join(""),16)}));a===null&&(c=p);if(a===null){j=p=c;b.charCodeAt(c)===48?(a="0",c+=1):(a=null,k===0&&i('"0"'));if(a!==null){/^[0-7]/.test(b.charAt(c))?(e=b.charAt(c),c++):(e=null,k===0&&i("[0-7]"));if(e!==null)for(g=[];e!==null;)g.push(e),/^[0-7]/.test(b.charAt(c))?(e=b.charAt(c),c++):(e=null,k===0&&i("[0-7]"));else g=null;g!==null?a=[a,g]:(a=null,c=j)}else a=null,c=j;a!==null&&(a=new r({type:"int",value:parseInt(a[1].join(""),8)}));a===null&&(c=p);a===null&&(p=c,b.charCodeAt(c)===
48?(a="0",c+=1):(a=null,k===0&&i('"0"')),a!==null&&(a=new r({type:"int",value:0})),a===null&&(c=p))}}m[d]={nextPos:c,result:a};return a}function sb(){var d="float_constant@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,h,p,j;j=a=c;g=[];/^[0-9]/.test(b.charAt(c))?(e=b.charAt(c),c++):(e=null,k===0&&i("[0-9]"));for(;e!==null;)g.push(e),/^[0-9]/.test(b.charAt(c))?(e=b.charAt(c),c++):(e=null,k===0&&i("[0-9]"));if(g!==null)if(b.charCodeAt(c)===46?(e=".",c+=1):(e=null,k===0&&i('"."')),e!==null){/^[0-9]/.test(b.charAt(c))?
(p=b.charAt(c),c++):(p=null,k===0&&i("[0-9]"));if(p!==null)for(h=[];p!==null;)h.push(p),/^[0-9]/.test(b.charAt(c))?(p=b.charAt(c),c++):(p=null,k===0&&i("[0-9]"));else h=null;h!==null?(p=ga(),p=p!==null?p:"",p!==null?g=[g,e,h,p]:(g=null,c=j)):(g=null,c=j)}else g=null,c=j;else g=null,c=j;if(g===null){j=c;/^[0-9]/.test(b.charAt(c))?(e=b.charAt(c),c++):(e=null,k===0&&i("[0-9]"));if(e!==null)for(g=[];e!==null;)g.push(e),/^[0-9]/.test(b.charAt(c))?(e=b.charAt(c),c++):(e=null,k===0&&i("[0-9]"));else g=null;
if(g!==null)if(b.charCodeAt(c)===46?(e=".",c+=1):(e=null,k===0&&i('"."')),e!==null){h=[];/^[0-9]/.test(b.charAt(c))?(p=b.charAt(c),c++):(p=null,k===0&&i("[0-9]"));for(;p!==null;)h.push(p),/^[0-9]/.test(b.charAt(c))?(p=b.charAt(c),c++):(p=null,k===0&&i("[0-9]"));h!==null?(p=ga(),p=p!==null?p:"",p!==null?g=[g,e,h,p]:(g=null,c=j)):(g=null,c=j)}else g=null,c=j;else g=null,c=j}g!==null&&(g[0]=g[0].join(""),g[2]=g[2].join(""),g=new r({type:"float",value:parseFloat(g.join(""))}));g===null&&(c=a);if(g===
null){j=a=c;/^[0-9]/.test(b.charAt(c))?(e=b.charAt(c),c++):(e=null,k===0&&i("[0-9]"));if(e!==null)for(g=[];e!==null;)g.push(e),/^[0-9]/.test(b.charAt(c))?(e=b.charAt(c),c++):(e=null,k===0&&i("[0-9]"));else g=null;g!==null?(e=ga(),e!==null?g=[g,e]:(g=null,c=j)):(g=null,c=j);g!==null&&(g=new r({type:"float",value:parseFloat(g[0].join("")+g[1])}));g===null&&(c=a)}m[d]={nextPos:c,result:g};return g}function ga(){var d="float_exponent@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,h,p,j;j=p=c;/^[Ee]/.test(b.charAt(c))?
(a=b.charAt(c),c++):(a=null,k===0&&i("[Ee]"));if(a!==null)if(/^[+\-]/.test(b.charAt(c))?(g=b.charAt(c),c++):(g=null,k===0&&i("[+\\-]")),g=g!==null?g:"",g!==null){/^[0-9]/.test(b.charAt(c))?(h=b.charAt(c),c++):(h=null,k===0&&i("[0-9]"));if(h!==null)for(e=[];h!==null;)e.push(h),/^[0-9]/.test(b.charAt(c))?(h=b.charAt(c),c++):(h=null,k===0&&i("[0-9]"));else e=null;e!==null?a=[a,g,e]:(a=null,c=j)}else a=null,c=j;else a=null,c=j;a!==null&&(a=["e",a[1]].concat(a[2]).join(""));a===null&&(c=p);m[d]={nextPos:c,
result:a};return a}function tb(){var b="paren_expression@"+c,a=m[b];if(a)return c=a.nextPos,a.result;var g,e,f,d;d=f=c;a=G();a!==null?(g=E(),g!==null?(e=D(),e!==null?a=[a,g,e]:(a=null,c=d)):(a=null,c=d)):(a=null,c=d);a!==null&&(a=a[1]);a===null&&(c=f);m[b]={nextPos:c,result:a};return a}function ub(){var d="bool_constant@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g;g=c;b.substr(c,4)==="true"?(a="true",c+=4):(a=null,k===0&&i('"true"'));a===null&&(b.substr(c,5)==="false"?(a="false",c+=5):(a=null,
k===0&&i('"false"')));a!==null&&(a=new r({type:"bool",value:a=="true"}));a===null&&(c=g);m[d]={nextPos:c,result:a};return a}function vb(){var b="primary_expression@"+c,a=m[b];if(a)return c=a.nextPos,a.result;a=wb();a===null&&(a=C(),a===null&&(a=sb(),a===null&&(a=rb(),a===null&&(a=ub(),a===null&&(a=tb())))));m[b]={nextPos:c,result:a};return a}function Y(){var b="index_accessor@"+c,a=m[b];if(a)return c=a.nextPos,a.result;var g,e,f,d;d=f=c;a=I();a!==null?(g=E(),g!==null?(e=J(),e!==null?a=[a,g,e]:(a=
null,c=d)):(a=null,c=d)):(a=null,c=d);a!==null&&(a=new r({type:"accessor",index:a[1]}));a===null&&(c=f);m[b]={nextPos:c,result:a};return a}function Z(){var d="field_selector@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,h;h=e=c;b.charCodeAt(c)===46?(a=".",c+=1):(a=null,k===0&&i('"."'));a!==null?(g=C(),g!==null?a=[a,g]:(a=null,c=h)):(a=null,c=h);a!==null&&(a=new r({type:"field_selector",selection:a[1].name}));a===null&&(c=e);m[d]={nextPos:c,result:a};return a}function xb(){var b="postfix_expression@"+
c,a=m[b];if(a)return c=a.nextPos,a.result;var g,e,f,d;d=a=c;g=vb();if(g!==null){e=[];f=Z();for(f===null&&(f=Y());f!==null;)e.push(f),f=Z(),f===null&&(f=Y());e!==null?g=[g,e]:(g=null,c=d)}else g=null,c=d;if(g!==null){e=g[1];g=g[0];for(f=0;f<e.length;f++)g=new r({type:"postfix",operator:e[f],expression:g})}g===null&&(c=a);m[b]={nextPos:c,result:g};return g}function yb(){var d="postfix_expression_no_repeat@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,h,j,n;n=a=c;g=xb();if(g!==null)if(b.substr(c,
2)==="++"?(e="++",c+=2):(e=null,k===0&&i('"++"')),e===null&&(b.substr(c,2)==="--"?(e="--",c+=2):(e=null,k===0&&i('"--"'))),e=e!==null?e:"",e!==null){h=[];j=Z();for(j===null&&(j=Y());j!==null;)h.push(j),j=Z(),j===null&&(j=Y());h!==null?g=[g,e,h]:(g=null,c=n)}else g=null,c=n;else g=null,c=n;if(g!==null){h=g[1];e=g[2];g=g[0];h&&(g=new r({type:"postfix",operator:new r({id:zb++,type:"operator",operator:h}),expression:g}));for(h=0;h<e.length;h++)g=new r({type:"postfix",operator:e[h],expression:g})}g===
null&&(c=a);m[d]={nextPos:c,result:g};return g}function Ab(){var d="parameter_list@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,h,j,n,l;j=c;b.substr(c,4)==="void"?(a="void",c+=4):(a=null,k===0&&i('"void"'));a!==null&&(a=[]);a===null&&(c=j);if(a===null){n=j=c;a=E();if(a!==null){g=[];l=c;e=u();e!==null?(h=E(),h!==null?e=[e,h]:(e=null,c=l)):(e=null,c=l);for(;e!==null;)g.push(e),l=c,e=u(),e!==null?(h=E(),h!==null?e=[e,h]:(e=null,c=l)):(e=null,c=l);g!==null?a=[a,g]:(a=null,c=n)}else a=null,c=n;
a!==null&&(a=function(a,b){return[a].concat(b.map(function(a){return a[1]}))}(a[0],a[1]));a===null&&(c=j)}m[d]={nextPos:c,result:a};return a}function wb(){var b="function_call@"+c,a=m[b];if(a)return c=a.nextPos,a.result;var g,e,f,d,h;h=a=c;g=Bb();g!==null?(e=G(),e!==null?(f=Ab(),f=f!==null?f:"",f!==null?(d=D(),d!==null?g=[g,e,f,d]:(g=null,c=h)):(g=null,c=h)):(g=null,c=h)):(g=null,c=h);if(g!==null&&(e=g[2],g=new r({type:"function_call",function_name:g[0],parameters:e}),!e))g.parameters=[];g===null&&
(c=a);m[b]={nextPos:c,result:g};return g}function Bb(){var b="function_identifier@"+c,a=m[b];if(a)return c=a.nextPos,a.result;var g;g=c;a=C();a!==null&&(a=a.name);a===null&&(c=g);a===null&&(a=T());m[b]={nextPos:c,result:a};return a}function ha(){var d="unary_expression@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,h,j;j=h=c;b.substr(c,2)==="++"?(a="++",c+=2):(a=null,k===0&&i('"++"'));a===null&&(b.substr(c,2)==="--"?(a="--",c+=2):(a=null,k===0&&i('"--"')),a===null&&(b.charCodeAt(c)===33?(a="!",
c+=1):(a=null,k===0&&i('"!"')),a===null&&(b.charCodeAt(c)===126?(a="~",c+=1):(a=null,k===0&&i('"~"')),a===null&&(b.charCodeAt(c)===43?(a="+",c+=1):(a=null,k===0&&i('"+"')),a===null&&(b.charCodeAt(c)===45?(a="-",c+=1):(a=null,k===0&&i('"-"')))))));a=a!==null?a:"";a!==null?(g=n(),g=g!==null?g:"",g!==null?(e=yb(),e!==null?a=[a,g,e]:(a=null,c=j)):(a=null,c=j)):(a=null,c=j);a!==null&&(g=a[0],z=a[2],g&&(z=new r({type:"unary",expression:z,operator:new r({type:"operator",operator:g})})),a=z);a===null&&(c=
h);m[d]={nextPos:c,result:a};return a}function La(){var d="multiplicative_operator@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,h,j;h=e=c;b.charCodeAt(c)===42?(a="*",c+=1):(a=null,k===0&&i('"*"'));a===null&&(b.charCodeAt(c)===47?(a="/",c+=1):(a=null,k===0&&i('"/"')),a===null&&(b.charCodeAt(c)===37?(a="%",c+=1):(a=null,k===0&&i('"%"'))));a!==null?(j=c,k++,b.charCodeAt(c)===61?(g="=",c+=1):(g=null,k===0&&i('"="')),k--,g===null?g="":(g=null,c=j),g!==null?a=[a,g]:(a=null,c=h)):(a=null,c=h);a!==
null&&(a=new r({type:"operator",operator:a[0]}));a===null&&(c=e);m[d]={nextPos:c,result:a};return a}function ia(){var b="multiplicative_expression@"+c,a=m[b];if(a)return c=a.nextPos,a.result;var g,e,f,d,h,i,j,k;j=i=c;a=ha();if(a!==null){g=[];k=c;e=n();e=e!==null?e:"";e!==null?(f=La(),f!==null?(d=n(),d=d!==null?d:"",d!==null?(h=ha(),h!==null?e=[e,f,d,h]:(e=null,c=k)):(e=null,c=k)):(e=null,c=k)):(e=null,c=k);for(;e!==null;)g.push(e),k=c,e=n(),e=e!==null?e:"",e!==null?(f=La(),f!==null?(d=n(),d=d!==null?
d:"",d!==null?(h=ha(),h!==null?e=[e,f,d,h]:(e=null,c=k)):(e=null,c=k)):(e=null,c=k)):(e=null,c=k);g!==null?a=[a,g]:(a=null,c=j)}else a=null,c=j;a!==null&&(a=H(a[0],a[1]));a===null&&(c=i);m[b]={nextPos:c,result:a};return a}function Ma(){var d="additive_operator@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,h,j;h=e=c;b.charCodeAt(c)===43?(a="+",c+=1):(a=null,k===0&&i('"+"'));a!==null?(j=c,k++,b.charCodeAt(c)===43?(g="+",c+=1):(g=null,k===0&&i('"+"')),g===null&&(b.charCodeAt(c)===61?(g="=",c+=
1):(g=null,k===0&&i('"="'))),k--,g===null?g="":(g=null,c=j),g!==null?a=[a,g]:(a=null,c=h)):(a=null,c=h);a!==null&&(a=new r({type:"operator",operator:"+"}));a===null&&(c=e);a===null&&(h=e=c,b.charCodeAt(c)===45?(a="-",c+=1):(a=null,k===0&&i('"-"')),a!==null?(j=c,k++,b.charCodeAt(c)===45?(g="-",c+=1):(g=null,k===0&&i('"-"')),g===null&&(b.charCodeAt(c)===61?(g="=",c+=1):(g=null,k===0&&i('"="'))),k--,g===null?g="":(g=null,c=j),g!==null?a=[a,g]:(a=null,c=h)):(a=null,c=h),a!==null&&(a=new r({type:"operator",
operator:"-"})),a===null&&(c=e));m[d]={nextPos:c,result:a};return a}function ja(){var b="additive_expression@"+c,a=m[b];if(a)return c=a.nextPos,a.result;var g,e,f,d,h,i,j,k;j=i=c;a=ia();if(a!==null){g=[];k=c;e=n();e=e!==null?e:"";e!==null?(f=Ma(),f!==null?(d=n(),d=d!==null?d:"",d!==null?(h=ia(),h!==null?e=[e,f,d,h]:(e=null,c=k)):(e=null,c=k)):(e=null,c=k)):(e=null,c=k);for(;e!==null;)g.push(e),k=c,e=n(),e=e!==null?e:"",e!==null?(f=Ma(),f!==null?(d=n(),d=d!==null?d:"",d!==null?(h=ia(),h!==null?e=[e,
f,d,h]:(e=null,c=k)):(e=null,c=k)):(e=null,c=k)):(e=null,c=k);g!==null?a=[a,g]:(a=null,c=j)}else a=null,c=j;a!==null&&(a=H(a[0],a[1]));a===null&&(c=i);m[b]={nextPos:c,result:a};return a}function Na(){var d="shift_operator@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,h,j;h=e=c;b.substr(c,2)==="<<"?(a="<<",c+=2):(a=null,k===0&&i('"<<"'));a===null&&(b.substr(c,2)===">>"?(a=">>",c+=2):(a=null,k===0&&i('">>"')));a!==null?(j=c,k++,b.charCodeAt(c)===61?(g="=",c+=1):(g=null,k===0&&i('"="')),k--,g===
null?g="":(g=null,c=j),g!==null?a=[a,g]:(a=null,c=h)):(a=null,c=h);a!==null&&(a=new r({type:"operator",operator:a[0]}));a===null&&(c=e);m[d]={nextPos:c,result:a};return a}function ka(){var b="shift_expression@"+c,a=m[b];if(a)return c=a.nextPos,a.result;var f,e,d,h,i,j,k,l;k=j=c;a=ja();if(a!==null){f=[];l=c;e=n();e=e!==null?e:"";e!==null?(d=Na(),d!==null?(h=n(),h=h!==null?h:"",h!==null?(i=ja(),i!==null?e=[e,d,h,i]:(e=null,c=l)):(e=null,c=l)):(e=null,c=l)):(e=null,c=l);for(;e!==null;)f.push(e),l=c,
e=n(),e=e!==null?e:"",e!==null?(d=Na(),d!==null?(h=n(),h=h!==null?h:"",h!==null?(i=ja(),i!==null?e=[e,d,h,i]:(e=null,c=l)):(e=null,c=l)):(e=null,c=l)):(e=null,c=l);f!==null?a=[a,f]:(a=null,c=k)}else a=null,c=k;a!==null&&(a=H(a[0],a[1]));a===null&&(c=j);m[b]={nextPos:c,result:a};return a}function Oa(){var d="relational_operator@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,h,j;j=h=c;b.charCodeAt(c)===60?(a="<",c+=1):(a=null,k===0&&i('"<"'));a!==null?(e=c,k++,b.charCodeAt(c)===60?(g="<",c+=1):
(g=null,k===0&&i('"<"')),k--,g===null?g="":(g=null,c=e),g!==null?(b.charCodeAt(c)===61?(e="=",c+=1):(e=null,k===0&&i('"="')),e=e!==null?e:"",e!==null?a=[a,g,e]:(a=null,c=j)):(a=null,c=j)):(a=null,c=j);a!==null&&(a=new r({type:"operator",operator:"<"+a[2]}));a===null&&(c=h);a===null&&(j=h=c,b.charCodeAt(c)===62?(a=">",c+=1):(a=null,k===0&&i('">"')),a!==null?(e=c,k++,b.charCodeAt(c)===62?(g=">",c+=1):(g=null,k===0&&i('">"')),k--,g===null?g="":(g=null,c=e),g!==null?(b.charCodeAt(c)===61?(e="=",c+=1):
(e=null,k===0&&i('"="')),e=e!==null?e:"",e!==null?a=[a,g,e]:(a=null,c=j)):(a=null,c=j)):(a=null,c=j),a!==null&&(a=new r({type:"operator",operator:">"+a[2]})),a===null&&(c=h));m[d]={nextPos:c,result:a};return a}function la(){var b="relational_expression@"+c,a=m[b];if(a)return c=a.nextPos,a.result;var f,e,d,h,i,j,k,l;k=j=c;a=ka();if(a!==null){f=[];l=c;e=n();e=e!==null?e:"";e!==null?(d=Oa(),d!==null?(h=n(),h=h!==null?h:"",h!==null?(i=ka(),i!==null?e=[e,d,h,i]:(e=null,c=l)):(e=null,c=l)):(e=null,c=l)):
(e=null,c=l);for(;e!==null;)f.push(e),l=c,e=n(),e=e!==null?e:"",e!==null?(d=Oa(),d!==null?(h=n(),h=h!==null?h:"",h!==null?(i=ka(),i!==null?e=[e,d,h,i]:(e=null,c=l)):(e=null,c=l)):(e=null,c=l)):(e=null,c=l);f!==null?a=[a,f]:(a=null,c=k)}else a=null,c=k;a!==null&&(a=H(a[0],a[1]));a===null&&(c=j);m[b]={nextPos:c,result:a};return a}function Pa(){var d="equality_operator@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g;g=c;b.substr(c,2)==="=="?(a="==",c+=2):(a=null,k===0&&i('"=="'));a===null&&(b.substr(c,
2)==="!="?(a="!=",c+=2):(a=null,k===0&&i('"!="')));a!==null&&(a=new r({type:"operator",operator:a}));a===null&&(c=g);m[d]={nextPos:c,result:a};return a}function ma(){var b="equality_expression@"+c,a=m[b];if(a)return c=a.nextPos,a.result;var f,e,d,h,i,j,k,l;k=j=c;a=la();if(a!==null){f=[];l=c;e=n();e=e!==null?e:"";e!==null?(d=Pa(),d!==null?(h=n(),h=h!==null?h:"",h!==null?(i=la(),i!==null?e=[e,d,h,i]:(e=null,c=l)):(e=null,c=l)):(e=null,c=l)):(e=null,c=l);for(;e!==null;)f.push(e),l=c,e=n(),e=e!==null?
e:"",e!==null?(d=Pa(),d!==null?(h=n(),h=h!==null?h:"",h!==null?(i=la(),i!==null?e=[e,d,h,i]:(e=null,c=l)):(e=null,c=l)):(e=null,c=l)):(e=null,c=l);f!==null?a=[a,f]:(a=null,c=k)}else a=null,c=k;a!==null&&(a=H(a[0],a[1]));a===null&&(c=j);m[b]={nextPos:c,result:a};return a}function Qa(){var d="bitwise_and_operator@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,h,j;h=e=c;b.charCodeAt(c)===38?(a="&",c+=1):(a=null,k===0&&i('"&"'));a!==null?(j=c,k++,b.charCodeAt(c)===61?(g="=",c+=1):(g=null,k===0&&
i('"="')),g===null&&(b.charCodeAt(c)===38?(g="&",c+=1):(g=null,k===0&&i('"&"'))),k--,g===null?g="":(g=null,c=j),g!==null?a=[a,g]:(a=null,c=h)):(a=null,c=h);a!==null&&(a=new r({type:"operator",operator:"&"}));a===null&&(c=e);m[d]={nextPos:c,result:a};return a}function na(){var b="bitwise_and_expression@"+c,a=m[b];if(a)return c=a.nextPos,a.result;var f,e,d,h,i,j,k,l;k=j=c;a=ma();if(a!==null){f=[];l=c;e=n();e=e!==null?e:"";e!==null?(d=Qa(),d!==null?(h=n(),h=h!==null?h:"",h!==null?(i=ma(),i!==null?e=
[e,d,h,i]:(e=null,c=l)):(e=null,c=l)):(e=null,c=l)):(e=null,c=l);for(;e!==null;)f.push(e),l=c,e=n(),e=e!==null?e:"",e!==null?(d=Qa(),d!==null?(h=n(),h=h!==null?h:"",h!==null?(i=ma(),i!==null?e=[e,d,h,i]:(e=null,c=l)):(e=null,c=l)):(e=null,c=l)):(e=null,c=l);f!==null?a=[a,f]:(a=null,c=k)}else a=null,c=k;a!==null&&(a=H(a[0],a[1]));a===null&&(c=j);m[b]={nextPos:c,result:a};return a}function Ra(){var d="bitwise_xor_operator@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,h,j;h=e=c;b.charCodeAt(c)===
94?(a="^",c+=1):(a=null,k===0&&i('"^"'));a!==null?(j=c,k++,b.charCodeAt(c)===61?(g="=",c+=1):(g=null,k===0&&i('"="')),g===null&&(b.charCodeAt(c)===94?(g="^",c+=1):(g=null,k===0&&i('"^"'))),k--,g===null?g="":(g=null,c=j),g!==null?a=[a,g]:(a=null,c=h)):(a=null,c=h);a!==null&&(a=new r({type:"operator",operator:"^"}));a===null&&(c=e);m[d]={nextPos:c,result:a};return a}function oa(){var b="bitwise_xor_expression@"+c,a=m[b];if(a)return c=a.nextPos,a.result;var f,e,d,h,i,j,k,l;k=j=c;a=na();if(a!==null){f=
[];l=c;e=n();e=e!==null?e:"";e!==null?(d=Ra(),d!==null?(h=n(),h=h!==null?h:"",h!==null?(i=na(),i!==null?e=[e,d,h,i]:(e=null,c=l)):(e=null,c=l)):(e=null,c=l)):(e=null,c=l);for(;e!==null;)f.push(e),l=c,e=n(),e=e!==null?e:"",e!==null?(d=Ra(),d!==null?(h=n(),h=h!==null?h:"",h!==null?(i=na(),i!==null?e=[e,d,h,i]:(e=null,c=l)):(e=null,c=l)):(e=null,c=l)):(e=null,c=l);f!==null?a=[a,f]:(a=null,c=k)}else a=null,c=k;a!==null&&(a=H(a[0],a[1]));a===null&&(c=j);m[b]={nextPos:c,result:a};return a}function Sa(){var d=
"bitwise_or_operator@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,h,j;h=e=c;b.charCodeAt(c)===124?(a="|",c+=1):(a=null,k===0&&i('"|"'));a!==null?(j=c,k++,b.charCodeAt(c)===61?(g="=",c+=1):(g=null,k===0&&i('"="')),g===null&&(b.charCodeAt(c)===124?(g="|",c+=1):(g=null,k===0&&i('"|"'))),k--,g===null?g="":(g=null,c=j),g!==null?a=[a,g]:(a=null,c=h)):(a=null,c=h);a!==null&&(a=new r({type:"operator",operator:"|"}));a===null&&(c=e);m[d]={nextPos:c,result:a};return a}function pa(){var b="bitwise_or_expression@"+
c,a=m[b];if(a)return c=a.nextPos,a.result;var f,e,d,h,i,j,k,l;k=j=c;a=oa();if(a!==null){f=[];l=c;e=n();e=e!==null?e:"";e!==null?(d=Sa(),d!==null?(h=n(),h=h!==null?h:"",h!==null?(i=oa(),i!==null?e=[e,d,h,i]:(e=null,c=l)):(e=null,c=l)):(e=null,c=l)):(e=null,c=l);for(;e!==null;)f.push(e),l=c,e=n(),e=e!==null?e:"",e!==null?(d=Sa(),d!==null?(h=n(),h=h!==null?h:"",h!==null?(i=oa(),i!==null?e=[e,d,h,i]:(e=null,c=l)):(e=null,c=l)):(e=null,c=l)):(e=null,c=l);f!==null?a=[a,f]:(a=null,c=k)}else a=null,c=k;a!==
null&&(a=H(a[0],a[1]));a===null&&(c=j);m[b]={nextPos:c,result:a};return a}function Ta(){var d="logical_and_operator@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g;g=c;b.substr(c,2)==="&&"?(a="&&",c+=2):(a=null,k===0&&i('"&&"'));a!==null&&(a=new r({type:"operator",operator:"&&"}));a===null&&(c=g);m[d]={nextPos:c,result:a};return a}function qa(){var b="logical_and_expression@"+c,a=m[b];if(a)return c=a.nextPos,a.result;var f,e,d,h,i,j,k,l;k=j=c;a=pa();if(a!==null){f=[];l=c;e=n();e=e!==null?e:"";e!==
null?(d=Ta(),d!==null?(h=n(),h=h!==null?h:"",h!==null?(i=pa(),i!==null?e=[e,d,h,i]:(e=null,c=l)):(e=null,c=l)):(e=null,c=l)):(e=null,c=l);for(;e!==null;)f.push(e),l=c,e=n(),e=e!==null?e:"",e!==null?(d=Ta(),d!==null?(h=n(),h=h!==null?h:"",h!==null?(i=pa(),i!==null?e=[e,d,h,i]:(e=null,c=l)):(e=null,c=l)):(e=null,c=l)):(e=null,c=l);f!==null?a=[a,f]:(a=null,c=k)}else a=null,c=k;a!==null&&(a=H(a[0],a[1]));a===null&&(c=j);m[b]={nextPos:c,result:a};return a}function Ua(){var d="logical_xor_operator@"+c,
a=m[d];if(a)return c=a.nextPos,a.result;var g;g=c;b.substr(c,2)==="^^"?(a="^^",c+=2):(a=null,k===0&&i('"^^"'));a!==null&&(a=new r({type:"operator",operator:"^^"}));a===null&&(c=g);m[d]={nextPos:c,result:a};return a}function ra(){var b="logical_xor_expression@"+c,a=m[b];if(a)return c=a.nextPos,a.result;var d,e,f,h,i,j,k,l;k=j=c;a=qa();if(a!==null){d=[];l=c;e=n();e=e!==null?e:"";e!==null?(f=Ua(),f!==null?(h=n(),h=h!==null?h:"",h!==null?(i=qa(),i!==null?e=[e,f,h,i]:(e=null,c=l)):(e=null,c=l)):(e=null,
c=l)):(e=null,c=l);for(;e!==null;)d.push(e),l=c,e=n(),e=e!==null?e:"",e!==null?(f=Ua(),f!==null?(h=n(),h=h!==null?h:"",h!==null?(i=qa(),i!==null?e=[e,f,h,i]:(e=null,c=l)):(e=null,c=l)):(e=null,c=l)):(e=null,c=l);d!==null?a=[a,d]:(a=null,c=k)}else a=null,c=k;a!==null&&(a=H(a[0],a[1]));a===null&&(c=j);m[b]={nextPos:c,result:a};return a}function Va(){var d="logical_or_operator@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g;g=c;b.substr(c,2)==="||"?(a="||",c+=2):(a=null,k===0&&i('"||"'));a!==null&&
(a=new r({type:"operator",operator:"||"}));a===null&&(c=g);m[d]={nextPos:c,result:a};return a}function Cb(){var b="logical_or_expression@"+c,a=m[b];if(a)return c=a.nextPos,a.result;var d,e,f,h,i,j,k,l;k=j=c;a=ra();if(a!==null){d=[];l=c;e=n();e=e!==null?e:"";e!==null?(f=Va(),f!==null?(h=n(),h=h!==null?h:"",h!==null?(i=ra(),i!==null?e=[e,f,h,i]:(e=null,c=l)):(e=null,c=l)):(e=null,c=l)):(e=null,c=l);for(;e!==null;)d.push(e),l=c,e=n(),e=e!==null?e:"",e!==null?(f=Va(),f!==null?(h=n(),h=h!==null?h:"",h!==
null?(i=ra(),i!==null?e=[e,f,h,i]:(e=null,c=l)):(e=null,c=l)):(e=null,c=l)):(e=null,c=l);d!==null?a=[a,d]:(a=null,c=k)}else a=null,c=k;a!==null&&(a=H(a[0],a[1]));a===null&&(c=j);m[b]={nextPos:c,result:a};return a}function N(){var d="conditional_expression@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,h,j,l,q,s,t,u,y,v;y=a=c;g=Cb();g!==null?(v=c,e=n(),e=e!==null?e:"",e!==null?(b.charCodeAt(c)===63?(h="?",c+=1):(h=null,k===0&&i('"?"')),h!==null?(j=n(),j=j!==null?j:"",j!==null?(l=E(),l!==null?
(q=n(),q=q!==null?q:"",q!==null?(b.charCodeAt(c)===58?(s=":",c+=1):(s=null,k===0&&i('":"')),s!==null?(t=n(),t=t!==null?t:"",t!==null?(u=E(),u!==null?e=[e,h,j,l,q,s,t,u]:(e=null,c=v)):(e=null,c=v)):(e=null,c=v)):(e=null,c=v)):(e=null,c=v)):(e=null,c=v)):(e=null,c=v)):(e=null,c=v),e=e!==null?e:"",e!==null?g=[g,e]:(g=null,c=y)):(g=null,c=y);g!==null&&(e=g[0],g=g[1],z=e,g&&(z=new r({type:"ternary",condition:e,is_true:g[3],is_false:g[7]})),g=z);g===null&&(c=a);m[d]={nextPos:c,result:g};return g}function E(){var d=
"assignment_expression@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,h,j,l,q;q=l=c;a=N();a!==null?(g=n(),g=g!==null?g:"",g!==null?(b.charCodeAt(c)===61?(e="=",c+=1):(e=null,k===0&&i('"="')),e===null&&(b.substr(c,2)==="*="?(e="*=",c+=2):(e=null,k===0&&i('"*="')),e===null&&(b.substr(c,2)==="/="?(e="/=",c+=2):(e=null,k===0&&i('"/="')),e===null&&(b.substr(c,2)==="%="?(e="%=",c+=2):(e=null,k===0&&i('"%="')),e===null&&(b.substr(c,2)==="+="?(e="+=",c+=2):(e=null,k===0&&i('"+="')),e===null&&(b.substr(c,
2)==="-="?(e="-=",c+=2):(e=null,k===0&&i('"-="')),e===null&&(b.substr(c,3)==="<<="?(e="<<=",c+=3):(e=null,k===0&&i('"<<="')),e===null&&(b.substr(c,3)===">>="?(e=">>=",c+=3):(e=null,k===0&&i('">>="')),e===null&&(b.substr(c,2)==="&="?(e="&=",c+=2):(e=null,k===0&&i('"&="')),e===null&&(b.substr(c,2)==="^="?(e="^=",c+=2):(e=null,k===0&&i('"^="')),e===null&&(b.substr(c,2)==="|="?(e="|=",c+=2):(e=null,k===0&&i('"|="')))))))))))),e!==null?(h=n(),h=h!==null?h:"",h!==null?(j=E(),j!==null?a=[a,g,e,h,j]:(a=null,
c=q)):(a=null,c=q)):(a=null,c=q)):(a=null,c=q)):(a=null,c=q);a!==null&&(a=new r({type:"binary",operator:new r({type:"operator",operator:a[2]}),left:a[0],right:a[4]}));a===null&&(c=l);a===null&&(a=N());m[d]={nextPos:c,result:a};return a}function Ca(){var d="condition@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,h,j,l,q,s;s=c;a=S();a!==null?(g=n(),g!==null?(e=C(),e!==null?(h=n(),h=h!==null?h:"",h!==null?(b.charCodeAt(c)===61?(j="=",c+=1):(j=null,k===0&&i('"="')),j!==null?(l=n(),l=l!==null?l:
"",l!==null?(q=E(),q!==null?a=[a,g,e,h,j,l,q]:(a=null,c=s)):(a=null,c=s)):(a=null,c=s)):(a=null,c=s)):(a=null,c=s)):(a=null,c=s)):(a=null,c=s);a===null&&(a=E());m[d]={nextPos:c,result:a};return a}function Gb(){var d;a:{d=wa;d.sort();for(var a=null,g=[],e=0;e<d.length;e++)d[e]!==a&&(g.push(d[e]),a=d[e]);switch(g.length){case 0:d="end of input";break a;case 1:d=g[0];break a;default:d=g.slice(0,g.length-1).join(", ")+" or "+g[g.length-1]}}a=Math.max(c,P);a=a<b.length?j(b.charAt(a)):"end of input";return"Expected "+
d+" but "+a+" found."}function Db(){for(var d=1,a=1,g=false,e=0;e<Math.max(c,P);e++){var h=b.charAt(e);h==="\n"?(g||d++,a=1,g=false):h==="\r"||h==="\u2028"||h==="\u2029"?(d++,a=1,g=true):(a++,g=false)}return{line:d,column:a}}function r(b){this.id=zb++;this.line=Db().line;for(var a in b)b.hasOwnProperty(a)&&(this[a]=b[a])}function H(b,a){for(var c=b,e=0;e<a.length;e++)c=new r({type:"binary",operator:a[e][1],left:c,right:a[e][3]});return c}function ab(b,a,c){c&&(a=a.concat([c]));c=b[0];c.guarded_statements=
b[1].statements;for(var b=c,e=0;e<a.length;e++)b.elseBody=a[e][0],b.elseBody.guarded_statements=a[e][1].statements,b=b.elseBody;return c}var Eb={EOF:q,_:n,additive_expression:ja,additive_operator:Ma,assignment_expression:E,attribute_qualifier:Ha,attribute_type:ib,bitwise_and_expression:na,bitwise_and_operator:Qa,bitwise_or_expression:pa,bitwise_or_operator:Sa,bitwise_xor_expression:oa,bitwise_xor_operator:Ra,bool_constant:ub,comma:u,comment:y,compound_statement:$,condition:Ca,conditional_expression:N,
const_qualifier:ea,declaration:ba,declarator:V,declarator_array_with_size:X,declarator_list:nb,declarator_list_arrays_have_size:Fa,declarator_list_no_array:jb,declarator_no_array:W,do_while:gb,equality_expression:ma,equality_operator:Pa,equals:K,expression_statement:Ba,external_declaration:Wa,external_statement:sa,external_statement_list:B,field_selector:Z,float_constant:sb,float_exponent:ga,for_loop:eb,fragment_start:function(){var b="fragment_start@"+c,a=m[b];if(a)return c=a.nextPos,a.result;var d,
e,f;f=e=c;R="fs";a="";a!==null?(d=B(),d!==null?a=[a,d]:(a=null,c=f)):(a=null,c=f);a!==null&&(a=a[1]);a===null&&(c=e);m[b]={nextPos:c,result:a};return a},fully_specified_type:hb,function_call:wb,function_definition:Ya,function_identifier:Bb,function_prototype:za,function_prototype_parameter_list:kb,global_declaration:Za,identifier:C,index_accessor:Y,init_declarator:fa,init_declarator_list:Ea,int_constant:rb,iteration_statement:cb,jump_statement:db,keyword:qb,left_brace:x,left_bracket:I,left_paren:G,
locally_specified_type:S,logical_and_expression:qa,logical_and_operator:Ta,logical_or_expression:Cb,logical_or_operator:Va,logical_xor_expression:ra,logical_xor_operator:Ua,matrix:Ja,member_list:ob,multiplicative_expression:ia,multiplicative_operator:La,newLine:l,noNewlineComment:A,noNewlineWhitespace:v,parameter_declaration:da,parameter_list:Ab,parameter_qualifier:mb,paren_expression:tb,postfix_expression:xb,postfix_expression_no_repeat:yb,precision_qualifier:ca,precision_type:U,preprocessor_else:va,
preprocessor_else_if:O,preprocessor_end:xa,preprocessor_external_branch:Xa,preprocessor_if:ua,preprocessor_operator:ta,preprocessor_statement_branch:ya,primary_expression:vb,relational_expression:la,relational_operator:Oa,reserved:function(){var d="reserved@"+c,a=m[d];if(a)return c=a.nextPos,a.result;var g,e,h,j;k++;j=c;a=[];for(g=Ka();g!==null;)a.push(g),g=Ka();if(a!==null)if(b.substr(c,2)==="g_"?(g="g_",c+=2):(g=null,k===0&&i('"g_"')),g!==null){e=[];/^[A-Za-z_0-9]/.test(b.charAt(c))?(h=b.charAt(c),
c++):(h=null,k===0&&i("[A-Za-z_0-9]"));for(;h!==null;)e.push(h),/^[A-Za-z_0-9]/.test(b.charAt(c))?(h=b.charAt(c),c++):(h=null,k===0&&i("[A-Za-z_0-9]"));e!==null?a=[a,g,e]:(a=null,c=j)}else a=null,c=j;else a=null,c=j;k--;k===0&&a===null&&i("reserved name");m[d]={nextPos:c,result:a};return a},right_brace:F,right_bracket:J,right_paren:D,selection_statement:bb,semicolon:s,shift_expression:ka,shift_operator:Na,simple_statement:Aa,single_underscore_identifier:Ka,statement_list:M,statement_no_new_scope:Q,
statement_with_scope:aa,struct_definition:$a,type_name:T,type_qualifier:Ga,unary_expression:ha,vector:Ia,vertex_start:function(){var b="vertex_start@"+c,a=m[b];if(a)return c=a.nextPos,a.result;var d,e,f;f=e=c;R="vs";a="";a!==null?(d=B(),d!==null?a=[a,d]:(a=null,c=f)):(a=null,c=f);a!==null&&(a=a[1]);a===null&&(c=e);m[b]={nextPos:c,result:a};return a},void_type:lb,while_loop:fb,while_statement:Da};if(d!==void 0){if(Eb[d]===void 0)throw Error("Invalid rule name: "+j(d)+".");}else d="external_statement_list";
var c=0,k=0,P=0,wa=[],m={},pb={},zb=0,R="vs",z=Eb[d]();if(z===null||c!==b.length){var Fb=Db();throw new this.SyntaxError(Gb(),Fb.line,Fb.column);}return z},toSource:function(){return this._source},SyntaxError:function(b,d,h){this.name="SyntaxError";this.message=b;this.line=d;this.column=h}};b.SyntaxError.prototype=Error.prototype;return b}();glslunit.SpliceTransformer=function(b,f,d,h,j){glslunit.ASTTransformer.call(this);this.newNodes_=j;this.parentNode_=b;this.fieldName_=f;this.position_=d;this.elements_=h;this.removedNodes_=[]};goog.inherits(glslunit.SpliceTransformer,glslunit.ASTTransformer);glslunit.SpliceTransformer.prototype.getRemovedNodes=function(){return this.removedNodes_};
glslunit.SpliceTransformer.prototype.maybeSpliceNode=function(b){if(b==this.parentNode_)if(b=glslunit.ASTTransformer.cloneNode(b),goog.isArray(b[this.fieldName_])){var f=this.newNodes_.map(glslunit.ASTTransformer.cloneNode);b[this.fieldName_]=goog.array.clone(b[this.fieldName_]);this.removedNodes_=[].splice.apply(b[this.fieldName_],[this.position_,this.elements_].concat(f))}else throw this.fieldName_+" wasn't an array.";return b};glslunit.SpliceTransformer.prototype.getTransformFunction=function(){return this.maybeSpliceNode};
glslunit.SpliceTransformer.splice=function(b,f,d,h,j,i){return(new glslunit.SpliceTransformer(f,d,h,j,i)).transformNode(b)};glslunit.VariableScopeVisitor=function(b,f){glslunit.ASTVisitor.call(this);this.targetScope_=b||null;this.promoteIfdefVars_=!!f;this.variablesInScope_={};this.stackFrames_=[];this.currentFrame_=[];this.scopeIdToFrame_={};this.scopeParameters_=[]};goog.inherits(glslunit.VariableScopeVisitor,glslunit.ASTVisitor);
glslunit.VariableScopeVisitor.prototype.getCurrentScopeVariables=function(){var b=this.stackFrames_.concat([this.currentFrame_]),f={};goog.array.forEachRight(b,function(b){goog.array.forEach(b,function(b){b.type=="declarator"?goog.array.forEach(b.declarators,function(d){goog.isDef(f[d.name.name])||(f[d.name.name]=b)},this):b.type=="parameter"&&(f[b.name]=b)},this)},this);return f};
glslunit.VariableScopeVisitor.prototype.beforeVisitScope=function(){this.stackFrames_.push(this.currentFrame_);this.currentFrame_=[];[].push.apply(this.currentFrame_,this.scopeParameters_);this.scopeParameters_=[]};glslunit.VariableScopeVisitor.prototype.afterVisitScope=function(b){this.scopeIdToFrame_[b.id]=this.currentFrame_;if(b==this.targetScope_)this.variablesInScope_=this.getCurrentScopeVariables();this.currentFrame_=this.stackFrames_.pop()};
glslunit.VariableScopeVisitor.prototype.beforeVisitRoot=glslunit.VariableScopeVisitor.prototype.beforeVisitScope;glslunit.VariableScopeVisitor.prototype.afterVisitPreprocessor=function(b){this.promoteIfdefVars_||this.afterVisitScope(b)};glslunit.VariableScopeVisitor.prototype.beforeVisitPreprocessor=function(b){this.promoteIfdefVars_||this.beforeVisitScope(b)};glslunit.VariableScopeVisitor.prototype.afterVisitRoot=glslunit.VariableScopeVisitor.prototype.afterVisitScope;
glslunit.VariableScopeVisitor.prototype.beforeVisitDeclarator=function(b){this.currentFrame_.push(b)};glslunit.VariableScopeVisitor.prototype.beforeVisitFunctionDeclaration=function(b){this.scopeParameters_=b.parameters};glslunit.VariableScopeVisitor.prototype.afterVisitFunctionDeclaration=function(){this.scopeParameters_=[]};glslunit.VariableScopeVisitor.getScopeToDeclarationMap=function(b){var f=new glslunit.VariableScopeVisitor;f.visitNode(b);return f.scopeIdToFrame_};
glslunit.VariableScopeVisitor.getVariablesInScope=function(b,f,d){f=new glslunit.VariableScopeVisitor(f,d);f.visitNode(b);return f.variablesInScope_};glslunit.Executor=function(b,f,d,h,j){this.context=b;this.sourceAst=f;this.variables=d;this.viewportHeight=h;this.viewportWidth=j;this.renameMap={}};glslunit.Executor.DecodeStatus={DISCARD:"discard",MISMATCH:"mismatch"};glslunit.Executor.TEST_VERTEX_COUNT=3;glslunit.Executor.testTriangleSource="attribute vec3 aTestTriangle;";glslunit.Executor.encodeFloatSource_="precision highp float;float upper_mask(float val, float n) {  float nShifted = exp2(n);  return fract(val/(nShifted))*nShifted;}vec4 encodeFloat(float f) {  const vec4 coding = vec4(1.0/255.0,                           255.0/256.0,                           65025.0/256.0,                           16581375.0/256.0);  vec4 result;  bool sign = f >= 0.0;  f = abs(f);  float expField = ceil(log2(max(f, 1e-32)));  f = f / exp2(expField);  result.r = ((float(sign) * 32.) + (upper_mask((expField + 16.), 5.)))     * 4. + 2.;  result.gba = vec3(f, f, f);  result = fract(result * coding);  result = floor(result * 255.0)/255.0;  return result;}";
glslunit.Executor.encodeFloatAST_=glslunit.glsl.parser.parse(glslunit.Executor.encodeFloatSource_);glslunit.Executor.decodeFloat=function(b){var f=256/255,d=Array(4);d[0]=b[0]>>2;d[1]=b[1]/255;d[2]=b[2]/255;d[3]=b[3]/255;var b=Number((d[0]&32)>0),h=Number(d[0]&31)-16,f=Number(d[1]*f/1+d[2]*f/255+d[3]*f/65025);return f==0&&b==0?glslunit.Executor.DecodeStatus.DISCARD:(-1+b*2)*Math.pow(2,h)*f};
glslunit.Executor.prototype.compileShader_=function(b,f){var d=this.context.createShader(f),h=glslunit.Generator.getSourceCode(b,"\n",true);this.context.shaderSource(d,h);this.context.compileShader(d);if(!this.context.getShaderParameter(d,this.context.COMPILE_STATUS))throw d=this.context.getShaderInfoLog(d),Error("Couldn't compile shader: "+d+"\n"+h);return d};
glslunit.Executor.prototype.setupShaderPrograms_=function(b,f){var d=this.compileShader_(b,this.context.VERTEX_SHADER),h=this.compileShader_(f,this.context.FRAGMENT_SHADER),j=this.context.createProgram();this.context.attachShader(j,d);this.context.attachShader(j,h);this.context.linkProgram(j);this.context.useProgram(j);return j};glslunit.Executor.addEncodeFunction_=function(b){return glslunit.SpliceTransformer.splice(b,b,"statements",0,0,glslunit.Executor.encodeFloatAST_.statements)};
glslunit.Executor.prototype.prepareAst=function(){var b=glslunit.glsl.parser.parse("void main()","function_prototype"),b=(new glslunit.FunctionRenameTransformer(b,"g_testMain")).transformNode(this.sourceAst),f=b!=this.sourceAst,b=glslunit.Executor.addEncodeFunction_(b);return{testAst:b,foundMain:f}};
glslunit.Executor.prototype.extractValue=function(b,f){var d,h;try{var j=this.getVertexAst(b),i=this.getFragmentAst(b);d=this.setupShaderPrograms_(j,i);this.context.clearColor(0,0,0,0);this.context.enable(this.context.DEPTH_TEST);this.context.viewport(0,0,this.viewportWidth,this.viewportHeight);this.context.clear(this.context.COLOR_BUFFER_BIT|this.context.DEPTH_BUFFER_BIT);var l=glslunit.VariableScopeVisitor.getVariablesInScope(j,j,true),q=glslunit.VariableScopeVisitor.getVariablesInScope(i,i,true),
n;for(n in q)q[n].typeAttribute.qualifier=="uniform"&&(l[n]=q[n]);var A=0;goog.array.forEach(this.variables,function(b){b.setGlobalVariables(l,this.renameMap);b.getLocation(this.context,d)!=null&&(b.bufferData(this.context,d,glslunit.Executor.TEST_VERTEX_COUNT,A),b.getIsTexture()&&A++)},this);h=new glslunit.NumberShaderVariable("aTestTriangle",null);h.setGlobalVariables(l,this.renameMap);h.bufferAttribute(this.context,d,glslunit.Executor.TEST_VERTEX_COUNT,new Float32Array([-1,1,0,-1,-1,0,1,1,0]));
goog.array.forEach(this.variables,function(b){b.getLocation(this.context,d)!=null&&b.bindData(this.context,d)},this);h.bindData(this.context,d);this.context.drawArrays(this.context.TRIANGLE_STRIP,0,glslunit.Executor.TEST_VERTEX_COUNT);var v=[new Uint8Array(4),new Uint8Array(4),new Uint8Array(4)];this.context.readPixels(0,1,1,1,this.context.RGBA,this.context.UNSIGNED_BYTE,v[0]);this.context.readPixels(0,this.viewportHeight-1,1,1,this.context.RGBA,this.context.UNSIGNED_BYTE,v[1]);this.context.readPixels(this.viewportWidth-
2,this.viewportHeight-1,1,1,this.context.RGBA,this.context.UNSIGNED_BYTE,v[2]);var y=goog.array.equals(v[0],v[1])&&goog.array.equals(v[0],v[2]);return!goog.isDef(f)&&!y?glslunit.Executor.DecodeStatus.MISMATCH:glslunit.Executor.decodeFloat(v[f||0])}finally{goog.array.forEach(this.variables,function(b){b.cleanUp(this.context)},this),d&&this.context.deleteProgram(d),h&&h.cleanUp(this.context)}};glslunit.testing.Expectation=function(){this.testPassed=false};glslunit.testing.Expectation.prototype.getTestPassed=function(){return this.testPassed};glslunit.testing.DiscardExpectation=function(){glslunit.testing.Expectation.call(this)};goog.inherits(glslunit.testing.DiscardExpectation,glslunit.testing.Expectation);glslunit.testing.DiscardExpectation.prototype.run=function(b){var f=glslunit.glsl.parser.parse("vec4(0.,1.,0.,1.)","assignment_expression");this.testPassed=b.extractValue(f)==glslunit.Executor.DecodeStatus.DISCARD};glslunit.testing.DiscardExpectation.prototype.getFailureString=function(){return"Expected shader would discard but it didn't"};goog.string.format=function(b,f){var d=Array.prototype.slice.call(arguments),h=d.shift();if(typeof h=="undefined")throw Error("[goog.string.format] Template required");return h.replace(/%([0\-\ \+]*)(\d+)?(\.(\d+))?([%sfdiu])/g,function(b,f,h,q,n,A,v,y){if(A=="%")return"%";var s=d.shift();if(typeof s=="undefined")throw Error("[goog.string.format] Not enough arguments");arguments[0]=s;return goog.string.format.demuxes_[A].apply(null,arguments)})};goog.string.format.demuxes_={};
goog.string.format.demuxes_.s=function(b,f,d){if(isNaN(d)||d==""||b.length>=d)return b;f.indexOf("-",0)>-1?b+=goog.string.repeat(" ",d-b.length):b=goog.string.repeat(" ",d-b.length)+b;return b};
goog.string.format.demuxes_.f=function(b,f,d,h,j){h=b.toString();isNaN(j)||j==""||(h=b.toFixed(j));var i;i=b<0?"-":f.indexOf("+")>=0?"+":f.indexOf(" ")>=0?" ":"";b>=0&&(h=i+h);if(isNaN(d)||h.length>=d)return h;h=isNaN(j)?Math.abs(b).toString():Math.abs(b).toFixed(j);b=d-h.length-i.length;f.indexOf("-",0)>=0?h=i+h+goog.string.repeat(" ",b):(f=f.indexOf("0",0)>=0?"0":" ",h=i+goog.string.repeat(f,b)+h);return h};
goog.string.format.demuxes_.d=function(b,f,d,h,j,i,l,q){return goog.string.format.demuxes_.f(parseInt(b,10),f,d,h,0,i,l,q)};goog.string.format.demuxes_.i=goog.string.format.demuxes_.d;goog.string.format.demuxes_.u=goog.string.format.demuxes_.d;glslunit.NodeCollector=function(b){glslunit.ASTVisitor.call(this);this.collectedNodes_=[];this.filterFunction_=b};goog.inherits(glslunit.NodeCollector,glslunit.ASTVisitor);glslunit.NodeCollector.prototype.maybeCollectNode_=function(b){this.filterFunction_(b)&&this.collectedNodes_.push(b);this.genericVisitor(b)};glslunit.NodeCollector.prototype.getCollectedNodes=function(){return this.collectedNodes_};glslunit.NodeCollector.prototype.getVisitFunction=function(){return this.maybeCollectNode_};
glslunit.NodeCollector.collectNodes=function(b,f){var d=new glslunit.NodeCollector(f);d.visitNode(b);return d.getCollectedNodes()};glslunit.IdentifierRenameTransformer=function(b,f){glslunit.ASTTransformer.call(this);this.oldName_=b;this.newName_=f};goog.inherits(glslunit.IdentifierRenameTransformer,glslunit.ASTTransformer);glslunit.IdentifierRenameTransformer.prototype.transformIdentifier=function(b){if(b.name==this.oldName_)b=glslunit.ASTTransformer.cloneNode(b),b.name=this.newName_;return b};glslunit.IdentifierRenameTransformer.renameVariable=function(b,f,d){return(new glslunit.IdentifierRenameTransformer(f,d)).transformNode(b)};glslunit.QualifierTransformer=function(b,f){glslunit.ASTTransformer.call(this);this.oldQualifier_=b;this.newQualifier_=f;this.transformedList_=[]};goog.inherits(glslunit.QualifierTransformer,glslunit.ASTTransformer);glslunit.QualifierTransformer.prototype.transformType=function(b){if(b.qualifier==this.oldQualifier_)b=glslunit.ASTTransformer.cloneNode(b),b.qualifier=this.newQualifier_;return b};glslunit.FragmentExecutor=function(b,f,d,h,j){var i=f,l={};goog.array.forEach(["varying mediump vec4 gl_FragCoord;","varying bool gl_FrontFacing;","varying mediump vec2 gl_PointCoord;"],function(b){var b=glslunit.glsl.parser.parse(b,"global_declaration"),d=b.declarators[0].name.name,f="g_"+d,h=glslunit.IdentifierRenameTransformer.renameVariable(i,d,f);h!=i&&(h=glslunit.SpliceTransformer.splice(h,h,"statements",0,0,[b]),h=glslunit.IdentifierRenameTransformer.renameVariable(h,d,f),l[d]=f);i=h});i=(new glslunit.QualifierTransformer("varying",
"uniform")).transformNode(i);glslunit.Executor.call(this,b,i,d,h,j);for(var q in l)this.renameMap[q]=l[q]};goog.inherits(glslunit.FragmentExecutor,glslunit.Executor);glslunit.FragmentExecutor.vertexSource_=glslunit.Executor.testTriangleSource+"void main(void) {  gl_Position = vec4(aTestTriangle, 1.);}";glslunit.FragmentExecutor.vertexAst_=glslunit.glsl.parser.parse(glslunit.FragmentExecutor.vertexSource_,"vertex_start");
glslunit.FragmentExecutor.prototype.getFragmentAst=function(b){var f=this.prepareAst(),d=f.testAst,b=goog.string.format("void main() {"+(f.foundMain?"  g_testMain();":"")+"  gl_FragColor = encodeFloat(float(%s));}",glslunit.Generator.getSourceCode(b)),b=glslunit.glsl.parser.parse(b,"fragment_start");[].push.apply(d.statements,b.statements);return d};glslunit.FragmentExecutor.prototype.getVertexAst=function(){return glslunit.FragmentExecutor.vertexAst_};glslunit.testing.ComparisonTester=function(){this.operator_="";this.values_=[];this.epsilon_=0;this.vectorComparisonType_="all"};glslunit.testing.ComparisonTester.OperatorToFunction={"<":"lessThan","<=":"lessThanEqual",">":"greaterThan",">=":"greaterThanEqual","==":"equal","!=":"notEqual"};glslunit.testing.ComparisonTester.prototype.getValues=function(){return this.values_};glslunit.testing.ComparisonTester.prototype.getEpsilon=function(){return this.epsilon_};
glslunit.testing.ComparisonTester.prototype.getOperator=function(){return this.operator_};glslunit.testing.ComparisonTester.prototype.getEpsilonDirection_=function(){var b;switch(this.operator_){case "<":case "<=":b="-";break;case ">":case ">=":b="+"}return b};
glslunit.testing.ComparisonTester.prototype.getVectorTestSource_=function(b){var f="",f="vec"+this.values_.length,d=this.getEpsilonDirection_();d?f=goog.string.format("%s(%s(%s %s %s, %s(%s)))",this.vectorComparisonType_,glslunit.testing.ComparisonTester.OperatorToFunction[this.operator_],glslunit.Generator.getSourceCode(b),d,glslunit.Generator.formatFloat(this.epsilon_),f,this.values_.map(glslunit.Generator.formatFloat).join(",")):(f=goog.string.format("%s(lessThanEqual(abs(%s - %s(%s)), %s(%s)))",
this.vectorComparisonType_,glslunit.Generator.getSourceCode(b),f,this.values_.map(glslunit.Generator.formatFloat).join(","),f,goog.array.repeat(this.epsilon_,this.values_.length).map(glslunit.Generator.formatFloat).join(",")),this.operator_=="!="&&(f="!"+f));return f};
glslunit.testing.ComparisonTester.prototype.getScalarTestSource_=function(b){var f=this.getEpsilonDirection_();f?b=goog.string.format("%s %s %s %s %s",glslunit.Generator.getSourceCode(b),f,glslunit.Generator.formatFloat(this.epsilon_),this.operator_,glslunit.Generator.formatFloat(this.values_)):(b=goog.string.format("(abs(%s - %s) <= %s)",glslunit.Generator.getSourceCode(b),glslunit.Generator.formatFloat(this.values_),glslunit.Generator.formatFloat(this.epsilon_)),this.operator_=="!="&&(b="!"+b));
return b};glslunit.testing.ComparisonTester.prototype.getTestAstNode=function(b){b=goog.isArray(this.values_)?this.getVectorTestSource_(b):this.getScalarTestSource_(b);return glslunit.glsl.parser.parse(b,"assignment_expression")};glslunit.testing.ComparisonTester.prototype.setOperator_=function(b,f){this.operator_=b;this.values_=f;return this};glslunit.testing.ComparisonTester.prototype.all=function(){this.vectorComparisonType_="all";return this};
glslunit.testing.ComparisonTester.prototype.any=function(){this.vectorComparisonType_="any";return this};glslunit.testing.ComparisonTester.prototype.withEpsilonOf=function(b){this.epsilon_=Math.max(0,b);return this};glslunit.testing.ComparisonTester.prototype.lessThan=function(b){return this.setOperator_("<",b)};glslunit.testing.ComparisonTester.prototype.lessThanEqual=function(b){return this.setOperator_("<=",b)};
glslunit.testing.ComparisonTester.prototype.greaterThan=function(b){return this.setOperator_(">",b)};glslunit.testing.ComparisonTester.prototype.greaterThanEqual=function(b){return this.setOperator_(">=",b)};glslunit.testing.ComparisonTester.prototype.equal=function(b){return this.setOperator_("==",b)};glslunit.testing.ComparisonTester.prototype.notEqual=function(b){return this.setOperator_("!=",b)};glslunit.testing.ValueBeingTested=function(){};glslunit.testing.ValueBeingTested.prototype.getValueAst=function(){};glslunit.testing.ComparisonExpectation=function(b){glslunit.testing.Expectation.call(this);this.value_=b;this.test_=new glslunit.testing.ComparisonTester;this.actualValue_=[];this.extractedMismatch_=false};goog.inherits(glslunit.testing.ComparisonExpectation,glslunit.testing.Expectation);glslunit.testing.ComparisonExpectation.prototype.getTest=function(){return this.test_};
glslunit.testing.ComparisonExpectation.prototype.run=function(b){var f=this.value_.getValueAst(),f=b.extractValue(this.test_.getTestAstNode(f));this.testPassed=Math.round(f)==1;if(f==glslunit.Executor.DecodeStatus.MISMATCH)this.actualValue_=glslunit.Executor.DecodeStatus.MISMATCH;else if(!this.testPassed)this.actualValue_=this.extractActualValue_(b);if(this.actualValue_==glslunit.Executor.DecodeStatus.MISMATCH)this.actualValue_=this.extractMismatch_(b)};
glslunit.testing.ComparisonExpectation.prototype.extractMismatch_=function(b){this.extractedMismatch_=true;for(var f=[],d=0;d<glslunit.Executor.TEST_VERTEX_COUNT;d++)f.push(this.extractActualValue_(b,d));return f};
glslunit.testing.ComparisonExpectation.prototype.extractActualValue_=function(b,f){var d,h=this.value_.getValueAst(),j=this.test_.getValues();if(goog.isArray(j)){d=[];for(var h=glslunit.Generator.getSourceCode(h),i=0;i<j.length;i++){var l=glslunit.glsl.parser.parse(h+"["+i+"]","assignment_expression"),l=b.extractValue(l,f);if(l==glslunit.Executor.DecodeStatus.MISMATCH)return l;d.push(l)}}else d=b.extractValue(h,f);return d};
glslunit.testing.ComparisonExpectation.prototype.getFailureString=function(){var b=glslunit.Generator.getSourceCode(this.value_.getValueAst()),f=Math.round(Math.log(Math.max(0.1,this.test_.getEpsilon()))/Math.LN10),d=function(b){if(goog.isArray(b))return b.map(d);if(!goog.isNumber(b))return b;var j=Math.pow(10,-1*f);return Math.round(b*j)/j},b="Expected "+b+" "+this.test_.getOperator()+" "+this.test_.getValues()+" with allowable error of "+this.test_.getEpsilon();return this.extractedMismatch_?"There was a mismatch between values at each test vertex.  This should not happen and usually indicates a driver bug.\n"+
b+"\n"+this.actualValue_.map(function(b,f){return"\tVertex "+f+" had value "+d(b)}).join("\n"):b+", was "+d(this.actualValue_)};glslunit.VertexExecutor=function(b,f,d,h,j){glslunit.Executor.call(this,b,f,d,h,j)};goog.inherits(glslunit.VertexExecutor,glslunit.Executor);glslunit.VertexExecutor.resultColorSource_="varying vec4 vResultColor;";glslunit.VertexExecutor.resultColorAst_=glslunit.glsl.parser.parse(glslunit.VertexExecutor.resultColorSource_,"global_declaration");glslunit.VertexExecutor.fragmentSource_="precision highp float;"+glslunit.VertexExecutor.resultColorSource_+"void main(void) {  gl_FragColor = vResultColor;}";
glslunit.VertexExecutor.fragmentAst_=glslunit.glsl.parser.parse(glslunit.VertexExecutor.fragmentSource_,"fragment_start");
glslunit.VertexExecutor.prototype.getVertexAst=function(b){var f=this.prepareAst(),d=f.testAst,f=f.foundMain,d=glslunit.SpliceTransformer.splice(d,d,"statements",0,0,[glslunit.VertexExecutor.resultColorAst_]),b=goog.string.format(glslunit.Executor.testTriangleSource+"void main() {"+(f?"  g_testMain();":"")+"  vResultColor = encodeFloat(float(%s));  gl_Position = vec4(aTestTriangle, 1.);}",glslunit.Generator.getSourceCode(b)),b=glslunit.glsl.parser.parse(b,"vertex_start");[].push.apply(d.statements,
b.statements);return d};glslunit.VertexExecutor.prototype.getFragmentAst=function(){return glslunit.VertexExecutor.fragmentAst_};glslunit.testing.NumericInputValue=function(b){this.shaderVariable_=b;this.bufferType_=null};glslunit.testing.NumericInputValue.prototype.bufferedAs=function(b){this.bufferType_=b;this.shaderVariable_.setBufferType(b)};glslunit.testing.NumericInputValue.prototype.getShaderVariable=function(){return this.shaderVariable_};glslunit.testing.IdentityInputValue=function(b){this.shaderVariable_=b};glslunit.testing.IdentityInputValue.prototype.getShaderVariable=function(){return this.shaderVariable_};glslunit.TextureShaderVariable=function(b,f,d,h){glslunit.ShaderVariable.call(this,b,true);this.height_=f;this.width_=d;this.data_=h;this.useMipmap_=false;this.parameters_=[];this.textureUnit_=this.texture_=null};goog.inherits(glslunit.TextureShaderVariable,glslunit.ShaderVariable);glslunit.TextureShaderVariable.prototype.addParameter=function(b,f,d){this.parameters_.push({name:b,value:f,isFloat:d})};glslunit.TextureShaderVariable.prototype.setUseMipmap=function(b){this.useMipmap_=b};
glslunit.TextureShaderVariable.prototype.bufferData=function(b,f,d,h){this.texture_=b.createTexture();this.textureUnit_=h;b.bindTexture(b.TEXTURE_2D,this.texture_);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,this.width_,this.height_,0,b.RGBA,b.UNSIGNED_BYTE,this.data_);goog.array.forEach(this.parameters_,function(d){(d.isFloat?b.texParameterf:b.texParameteri).apply(b,[b.TEXTURE_2D,d.name,d.value])},this);this.useMipmap_&&b.generateMipmap(b.TEXTURE_2D);b.bindTexture(b.TEXTURE_2D,null)};
glslunit.TextureShaderVariable.prototype.bindData=function(b,f){if(this.getTypeName()!="sampler2D")throw this.getName()+" was bound as a texture, but is a "+this.getTypeName();this.texture_&&this.textureUnit_!=null&&(b.activeTexture(b["TEXTURE"+this.textureUnit_]),b.bindTexture(b.TEXTURE_2D,this.texture_),b.uniform1i(this.getLocation(b,f),this.textureUnit_))};
glslunit.TextureShaderVariable.prototype.cleanUp=function(b){glslunit.TextureShaderVariable.superClass_.cleanUp.call(this,b);this.texture_&&b.deleteTexture(this.texture_)};glslunit.testing.TextureInputValue=function(b){this.shaderVariable_=b};glslunit.testing.TextureInputValue.prototype.texParameteri=function(b,f){this.shaderVariable_.addParameter(b,f,false);return this};glslunit.testing.TextureInputValue.prototype.texParameterf=function(b,f){this.shaderVariable_.addParameter(b,f,true);return this};glslunit.testing.TextureInputValue.prototype.withMipmap=function(){this.shaderVariable_.setUseMipmap(true);return this};
glslunit.testing.TextureInputValue.prototype.getShaderVariable=function(){return this.shaderVariable_};glslunit.UploadedTextureVariable=function(b,f){glslunit.ShaderVariable.call(this,b,true);this.texture_=f;this.textureUnit_=null};goog.inherits(glslunit.UploadedTextureVariable,glslunit.ShaderVariable);glslunit.UploadedTextureVariable.prototype.bufferData=function(b,f,d,h){this.textureUnit_=h};
glslunit.UploadedTextureVariable.prototype.bindData=function(b,f){this.texture_&&this.textureUnit_!=null&&(b.activeTexture(b.TEXTURE0+this.textureUnit_),b.bindTexture(b.TEXTURE_2D,this.texture_),b.uniform1i(this.getLocation(b,f),this.textureUnit_))};glslunit.UploadedTextureVariable.prototype.cleanUp=function(){};glslunit.testing.UntypedValue=function(b){this.variableName_=b;this.typedTestValue_=null};glslunit.testing.UntypedValue.prototype.asSingleColor=function(b){if(b.length!=4)throw"Error while creating a Single Color for "+this.variableName_+": Expected 4 components but found "+b.length+" components.";b=new glslunit.TextureShaderVariable(this.variableName_,1,1,new Uint8Array(b));return this.typedTestValue_=new glslunit.testing.TextureInputValue(b)};
glslunit.testing.UntypedValue.prototype.as2DTexture=function(b,f,d){var h=4*f*d;if(b.length!=h)throw"Error while creating a 2D Texture for "+this.variableName_+": Expected "+h+" components but found "+b.length+" components.";b=new glslunit.TextureShaderVariable(this.variableName_,f,d,new Uint8Array(b));return this.typedTestValue_=new glslunit.testing.TextureInputValue(b)};
glslunit.testing.UntypedValue.prototype.asUploadedTexture=function(b){b=new glslunit.UploadedTextureVariable(this.variableName_,b);this.typedTestValue_=new glslunit.testing.IdentityInputValue(b)};glslunit.testing.UntypedValue.prototype.asArray=function(b){b=new glslunit.NumberShaderVariable(this.variableName_,b);return this.typedTestValue_=new glslunit.testing.NumericInputValue(b)};glslunit.testing.UntypedValue.prototype.asNumber=function(b){return this.asArray([b])};
glslunit.testing.UntypedValue.prototype.asIdentityMatrix=function(){return this.asArray([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};glslunit.testing.UntypedValue.prototype.asBoolean=function(b){return this.asArray([Number(b)])};glslunit.testing.UntypedValue.prototype.getShaderVariable=function(){return this.typedTestValue_.shaderVariable_};glslunit.testing.GlobalValue=function(b){this.valueSource_=b};glslunit.testing.GlobalValue.prototype.getValueAst=function(){return glslunit.glsl.parser.parse(this.valueSource_,"assignment_expression")};glslunit.testing.TestCase=function(b,f,d,h,j,i,l){this.context_=b;this.viewportHeight_=f;this.viewportWidth_=d;this.testType_=h;this.sourceAst_=j;this.description_=i;this.testFn_=l;this.values_={};this.defines_=[];this.expectations_=[];this.testPassed_=false};glslunit.testing.TestCase.TestType={VERTEX:0,FRAGMENT:1};glslunit.testing.TestCase.prototype.getDescription=function(){return this.description_};glslunit.testing.TestCase.prototype.getTestPassed=function(){return this.testPassed_};
glslunit.testing.TestCase.prototype.getExpectations=function(){return this.expectations_};
glslunit.testing.TestCase.prototype.run=function(){window.define=goog.bind(function(b){this.defines_.push(b)},this);window.set=goog.bind(function(b){var d=new glslunit.testing.UntypedValue(b);return this.values_[b]=d},this);window.expect=goog.bind(function(b){b=new glslunit.testing.GlobalValue(b);b=new glslunit.testing.ComparisonExpectation(b);this.expectations_.push(b);return b.getTest()},this);if(this.testType_==glslunit.testing.TestCase.TestType.FRAGMENT)window.expectDiscard=goog.bind(function(){var b=
new glslunit.testing.DiscardExpectation;this.expectations_.push(b);return b},this);this.expectations_=[];this.values_=[];this.defines_=[];this.testFn_(this.context_);delete window.define;delete window.set;delete window.expect;delete window.expectDiscard;var b=[],f;for(f in this.values_)b.push(this.values_[f].getShaderVariable());f=this.sourceAst_;if(this.defines_.length>0){var d=this.defines_.map(function(b){return"#define "+b}).join("\n"),d=glslunit.glsl.parser.parse(d).statements;f=glslunit.SpliceTransformer.splice(f,
f,"statements",0,0,d)}var h=new (this.testType_==glslunit.testing.TestCase.TestType.FRAGMENT?glslunit.FragmentExecutor:glslunit.VertexExecutor)(this.context_,f,b,this.viewportHeight_,this.viewportWidth_);this.testPassed_=true;goog.array.forEach(this.expectations_,function(b){b.run(h);this.testPassed_=this.testPassed_&&b.getTestPassed()},this);return this.testPassed_};glslunit.testing.TestSuite=function(b,f,d,h,j,i,l){this.context_=b;this.viewportHeight_=f;this.viewportWidth_=d;this.testType_=h;this.sourceAst_=glslunit.glsl.parser.parse(i,h==glslunit.testing.TestCase.TestType.FRAGMENT?"fragment_start":"vertex_start");this.testCases_=[];this.suitePassed_=false;this.testSuiteFn_=l;this.description_=j};glslunit.testing.TestSuite.prototype.getDescription=function(){return this.description_};glslunit.testing.TestSuite.prototype.getSuitePassed=function(){return this.suitePassed_};
glslunit.testing.TestSuite.prototype.getTestCases=function(){return this.testCases_};
glslunit.testing.TestSuite.prototype.run=function(){window.testMain=goog.bind(function(b,f){this.testCases_.push(new glslunit.testing.TestCase(this.context_,this.viewportHeight_,this.viewportWidth_,this.testType_,this.sourceAst_,b,f))},this);this.testCases_=[];this.testSuiteFn_(this.context_);delete window.testMain;this.suitePassed_=true;goog.array.forEach(this.testCases_,function(b){b.run();this.suitePassed_=this.suitePassed_&&b.getTestPassed()},this);return this.suitePassed_};glslunit.testing.GlslJstdAdapter=function(){this.name="glslunit";this.testSuites_=[];this.canvas=null;window.vertexTestSuite=goog.bind(function(b,f,d){this.testSuites_.push(goog.bind(function(h){return new glslunit.testing.TestSuite(h,50,50,glslunit.testing.TestCase.TestType.VERTEX,b,f,d)},this))},this);window.fragmentTestSuite=goog.bind(function(b,f,d){this.testSuites_.push(goog.bind(function(h){return new glslunit.testing.TestSuite(h,50,50,glslunit.testing.TestCase.TestType.FRAGMENT,b,f,d)},this))},
this)};glslunit.testing.GlslJstdAdapter.GLSLUNIT_TYPE="GLSL Unit Test";glslunit.testing.GlslJstdAdapter.prototype.onTestsStart=function(){this.canvas=document.createElement("canvas");this.canvas.height=50;this.canvas.width=50;document.body.appendChild(this.canvas);this.gl=WebGLDebugUtils.makeDebugContext(this.canvas.getContext("experimental-webgl",{stencil:true,preserveDrawingBuffer:true}),function(b,f){throw WebGLDebugUtils.glEnumToString(b)+" was caused by call to "+f;})};
glslunit.testing.GlslJstdAdapter.prototype.runTestConfiguration=function(b,f){b.getTestCaseInfo().getType()==glslunit.testing.GlslJstdAdapter.GLSLUNIT_TYPE&&goog.array.forEach(this.testSuites_,function(b){var h,j,i=[],l=goog.now();try{h=b(this.gl),h.run()}catch(q){j="error",i.push(q.toString())}var n=goog.now(),A=function(b){f(new jstestdriver.TestResult(h.getDescription(),b,j,"",i.join("\n"),n-l))};j!="error"?goog.array.forEach(h.getTestCases(),function(b){i=[];goog.array.forEach(b.getExpectations(),
function(b,d){var f=b.getTestPassed()?"Passed":"Failed: "+b.getFailureString();i.push(goog.string.format("Expectation %d %s.",d,f))},this);j=b.getTestPassed()?"passed":"failed";A(b.getDescription())},this):A("Runtime")},this)};glslunit.testing.GlslJstdAdapter.prototype.onTestsFinish=function(){document.body.removeChild(this.canvas)};
glslunit.testing.GlslJstdAdapter.prototype.getTestRunsConfigurationFor=function(b,f,d){d.push(new jstestdriver.TestRunConfiguration(new jstestdriver.TestCaseInfo("GLSLUnit Tests",function(){},glslunit.testing.GlslJstdAdapter.GLSLUNIT_TYPE),[]));return true};jstestdriver.pluginRegistrar.register(new glslunit.testing.GlslJstdAdapter);
